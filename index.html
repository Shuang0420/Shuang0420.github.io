<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://cdn.petpictures.xyz/2016/02/07/so-pretty-dogs-photo-14940252-fanpop.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Shuang</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
						<li>Ãœber</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">Homepage</a></li>
				        
							<li><a href="/archives">Posts</a></li>
				        
							<li><a href="/categories">Categories</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Shuang0420" title="github">github</a>
					        
								<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/shuang-xu-7008b894?trk=hp-identity-name" title="linkedin">linkedin</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/LDA/" style="font-size: 20px;">LDA</a> <a href="/tags/cluster/" style="font-size: 20px;">cluster</a> <a href="/tags/gensim/" style="font-size: 15px;">gensim</a> <a href="/tags/machine-learning/" style="font-size: 20px;">machine learning</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/python-debug/" style="font-size: 10px;">python debug</a> <a href="/tags/topic-modeling/" style="font-size: 20px;">topic modeling</a> <a href="/tags/ä¸­æ–‡åˆ†è¯/" style="font-size: 10px;">ä¸­æ–‡åˆ†è¯</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">é¢œè‰²ä¸ä¸€æ ·çš„çƒŸç«â€¦</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Shuang</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://cdn.petpictures.xyz/2016/02/07/so-pretty-dogs-photo-14940252-fanpop.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Shuang</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">Homepage</a></li>
		        
					<li><a href="/archives">Posts</a></li>
		        
					<li><a href="/categories">Categories</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Shuang0420" title="github">github</a>
			        
						<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/shuang-xu-7008b894?trk=hp-identity-name" title="linkedin">linkedin</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-çŸ­é—®é¢˜å½’ä¸€åŒ–-LSIæ¨¡å‹" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/25/çŸ­é—®é¢˜å½’ä¸€åŒ–-LSIæ¨¡å‹/" class="article-date">
  	<time datetime="2016-05-25T12:59:36.000Z" itemprop="datePublished">2016-05-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/25/çŸ­é—®é¢˜å½’ä¸€åŒ–-LSIæ¨¡å‹/">çŸ­å¥å½’ä¸€åŒ–--LSIæ¨¡å‹</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="LSI-ç†è§£"><a href="#LSI-ç†è§£" class="headerlink" title="LSI ç†è§£"></a>LSI ç†è§£</h3><p>LSI(Latent Semantic Indexing)ï¼Œä¸­æ–‡æ„è¯‘æ˜¯æ½œåœ¨è¯­ä¹‰ç´¢å¼•ï¼Œå³é€šè¿‡æµ·é‡æ–‡çŒ®æ‰¾å‡ºè¯æ±‡ä¹‹é—´çš„å…³ç³»ã€‚åŸºæœ¬ç†å¿µæ˜¯å½“ä¸¤ä¸ªè¯æˆ–ä¸€ç»„è¯å¤§é‡å‡ºç°åœ¨ä¸€ä¸ªæ–‡æ¡£ä¸­æ—¶ï¼Œè¿™äº›è¯ä¹‹é—´å°±æ˜¯è¯­ä¹‰ç›¸å…³çš„ã€‚</p>
<blockquote>
<p>æ½œåœ¨è¯­ä¹‰ç´¢å¼•æ˜¯ä¸€ç§ç”¨å¥‡å¼‚å€¼åˆ†è§£æ–¹æ³•è·å¾—åœ¨æ–‡æœ¬ä¸­æœ¯è¯­å’Œæ¦‚å¿µä¹‹é—´å…³ç³»çš„ç´¢å¼•å’Œè·å–æ–¹æ³•ã€‚è¯¥æ–¹æ³•çš„ä¸»è¦ä¾æ®æ˜¯åœ¨ç›¸åŒæ–‡ç« ä¸­çš„è¯è¯­ä¸€èˆ¬æœ‰ç±»ä¼¼çš„å«ä¹‰ã€‚è¯¥æ–¹æ³•å¯ä»¥å¯ä»¥ä»ä¸€ç¯‡æ–‡ç« ä¸­æå–æœ¯è¯­å…³ç³»ï¼Œä»è€Œå»ºç«‹èµ·ä¸»è¦æ¦‚å¿µå†…å®¹ã€‚</p>
</blockquote>
<h3 id="é™ç»´è¿‡ç¨‹"><a href="#é™ç»´è¿‡ç¨‹" class="headerlink" title="é™ç»´è¿‡ç¨‹"></a>é™ç»´è¿‡ç¨‹</h3><p>å°†æ–‡æ¡£åº“è¡¨ç¤ºæˆVSMæ¨¡å‹çš„è¯-æ–‡æ¡£çŸ©é˜µAmÃ—n(è¯-æ–‡æ¡£çŸ©é˜µé‚£å°±æ˜¯è¯ä½œä¸ºè¡Œï¼Œæ–‡æ¡£ä½œä¸ºåˆ—ï¼Œè¿™æ˜¯çŸ©é˜µå…ˆè¡Œååˆ—çš„è¡¨ç¤ºå†³å®šçš„ï¼Œå½“ç„¶å¦‚æœè¡¨ç¤ºæˆæ–‡æ¡£-è¯çŸ©é˜µçš„è¯ï¼Œåé¢çš„è®¡ç®—å°±è¦ç”¨è¯¥çŸ©é˜µçš„è½¬ç½®äº†),å…¶ä¸­mè¡¨ç¤ºæ–‡æ¡£åº“ä¸­åŒ…å«çš„æ‰€æœ‰ä¸åŒçš„è¯çš„ä¸ª(è¡Œæ•°æ˜¯ä¸åŒè¯çš„ä¸ªæ•°)ï¼Œå³è¡Œå‘é‡è¡¨ç¤ºä¸€ä¸ªè¯åœ¨ä¸åŒæ–‡æ¡£å‡ºç°çš„æ¬¡æ•°ï¼Œn è¡¨ç¤ºæ–‡æ¡£åº“ä¸­çš„æ–‡æ¡£æ•°(åˆ—æ•°æ˜¯ä¸åŒæ–‡æ¡£çš„ä¸ªæ•°)ï¼Œå³åˆ—å‘é‡è¡¨ç¤ºçš„æ˜¯ä¸åŒçš„æ–‡æ¡£.Aè¡¨ç¤ºä¸ºA = [Î± ij ],åœ¨æ­¤çŸ©é˜µä¸­ ,Î± ijä¸ºéè´Ÿå€¼ , è¡¨ç¤ºç¬¬ i ä¸ªè¯åœ¨ç¬¬j ä¸ªæ–‡æ¡£ä¸­å‡ºç°çš„é¢‘åº¦ã€‚æ˜¾ç„¶ï¼ŒAæ˜¯ç¨€ç–çŸ©é˜µ(è¿™æ˜¯VSMå’Œæ–‡æ¡£å†³å®šçš„)ã€‚</p>
<p>åˆ©ç”¨å¥‡å¼‚å€¼åˆ†è§£SVD(Singular Value Decomposition)æ±‚Açš„åªæœ‰Kä¸ªæ­£äº¤å› å­çš„é™ç§©çŸ©é˜µï¼Œè¯¥è¿‡ç¨‹å°±æ˜¯é™ç»´çš„è¿‡ç¨‹ã€‚SVDçš„é‡è¦ä½œç”¨æ˜¯æŠŠè¯å’Œæ–‡æ¡£æ˜ å°„åˆ°åŒä¸€ä¸ªè¯­ä¹‰ç©ºé—´ä¸­ï¼Œå°†è¯å’Œæ–‡æ¡£è¡¨ç¤ºä¸ºKä¸ªå› å­çš„å½¢å¼ã€‚æ˜¾ç„¶ï¼Œè¿™ä¼šä¸¢å¤±ä¿¡æ¯ï¼Œä½†ä¸»è¦çš„ä¿¡æ¯å´è¢«ä¿ç•™äº†ã€‚ä¸ºä»€ä¹ˆè¯¥è¿‡ç¨‹å¯ä»¥é™ç»´å‘¢ï¼Ÿå› ä¸ºè¯¥è¿‡ç¨‹è§£å†³äº†åŒä¹‰å’Œå¤šä¹‰ç°è±¡ã€‚å¯ä»¥çœ‹å‡ºï¼ŒKçš„å–å€¼å¯¹æ•´ä¸ªåˆ†ç±»ç»“æœçš„å½±å“å¾ˆå¤§ã€‚å› ä¸ºï¼ŒKè¿‡å°ï¼Œåˆ™ä¸¢å¤±ä¿¡æ¯å°±è¶Šå¤šï¼›Kè¿‡å¤§ï¼Œä¿¡æ¯è™½ç„¶å¤šï¼Œä½†å¯èƒ½æœ‰å†—ä½™ä¸”è®¡ç®—æ¶ˆè€—å¤§ã€‚Kçš„é€‰æ‹©ä¹Ÿæ˜¯å€¼å¾—ç ”ç©¶çš„ï¼Œä¸è¿‡ä¸€èˆ¬å–å€¼ä¸º100-300ï¼Œä¸ç»å¯¹ã€‚</p>
<h3 id="é€‚ç”¨æ€§"><a href="#é€‚ç”¨æ€§" class="headerlink" title="é€‚ç”¨æ€§"></a>é€‚ç”¨æ€§</h3><p>å¯¹äº LSI/PLSI æ¥è¯´ï¼Œèšç±»çš„æ„ä¹‰ä¸åœ¨äºæ–‡æ¡£ï¼Œè€Œåœ¨äºå•è¯ã€‚æ‰€ä»¥å¯¹äºèšç±»çš„ä¸€ç§å˜å‹ç”¨æ³•æ˜¯ï¼Œå½“ k è®¾çš„è¶³å¤Ÿå¤§æ—¶ï¼ŒLSI/PLSI èƒ½å¤Ÿç»™å‡ºè½åœ¨ä¸åŒå­ç©ºé—´çš„å•è¯åºåˆ—ï¼ŒåŸºæœ¬ä¸Šè¿™äº›å•è¯ä¹‹é—´æ‹¥æœ‰è¾ƒä¸ºç´§å¯†çš„è¯­ä¹‰è”ç³»ã€‚å…¶å®è¿™ç§ç”¨æ³•æœ¬è´¨ä¸Šè¿˜æ˜¯åœ¨åˆ©ç”¨é™ç»´åšå•è¯ç›¸å…³åº¦è®¡ç®—ã€‚</p>
<ol>
<li><p>ç‰¹å¾é™ç»´<br>LSI æœ¬è´¨ä¸Šæ˜¯æŠŠæ¯ä¸ªç‰¹å¾æ˜ å°„åˆ°äº†ä¸€ä¸ªæ›´ä½ç»´çš„å­ç©ºé—´ï¼ˆsub space)ï¼Œæ‰€ä»¥ç”¨æ¥åšé™ç»´å¯ä»¥è¯´æ˜¯å¤©é€ åœ°è®¾ã€‚TFIDFæ˜¯å¦ä¸€ä¸ªé€šç”¨çš„é™ç»´æ–¹æ³•ï¼Œé€šè¿‡ä¸€ä¸ªç®€å•çš„å…¬å¼ï¼ˆä¸¤ä¸ªæ•´æ•°ç›¸ä¹˜ï¼‰å¾—åˆ°ä¸åŒå•è¯çš„é‡è¦ç¨‹åº¦ï¼Œå¹¶å–å‰kä¸ªæœ€é‡è¦çš„å•è¯ï¼Œè€Œä¸¢å¼ƒå…¶å®ƒå•è¯ï¼Œåªæœ‰ä¿¡æ¯çš„ä¸¢å¤±ï¼Œå¹¶æ²¡æœ‰ä¿¡æ¯çš„æ”¹å˜ã€‚ä»æ‰§è¡Œæ•ˆç‡ä¸Š TFIDF è¿œè¿œé«˜äº LSIï¼Œä¸è¿‡ä»æ•ˆæœä¸Šï¼ˆè‡³å°‘åœ¨å­¦æœ¯ç•Œï¼‰LSI è¦ä¼˜äºTFIDFã€‚<br>ä¸è¿‡å¿…é¡»æé†’çš„æ˜¯ï¼Œæ— è®ºæ˜¯ä¸Šè¿°å“ªä¸€ç§é™ç»´æ–¹æ³•ï¼Œéƒ½ä¼šé€ æˆä¿¡æ¯çš„åå·®ï¼Œè¿›è€Œå½±å“åç»­åˆ†ç±»/èšç±»çš„å‡†ç¡®ç‡ã€‚ é™ç»´æ˜¯å¸Œæœ›ä»¥å¯æ¥å—çš„æ•ˆæœæŸå¤±ä¸‹ï¼Œå¤§å¤§æé«˜è¿è¡Œæ•ˆç‡å’ŒèŠ‚çœå†…å­˜ç©ºé—´ã€‚ç„¶è€Œèƒ½ä¸é™ç»´çš„æ—¶å€™è¿˜æ˜¯ä¸è¦é™ç»´ï¼ˆæ¯”å¦‚ä½ åªæœ‰å‡ åƒç¯‡æ–‡æ¡£è¦å¤„ç†ï¼Œé‚£æ ·çœŸçš„æ²¡æœ‰å¿…è¦é™ç»´ï¼‰ã€‚</p>
</li>
<li><p>å•è¯ç›¸å…³åº¦è®¡ç®—<br>LSI çš„ç»“æœé€šè¿‡ç®€å•å˜æ¢å°±èƒ½å¾—åˆ°ä¸åŒå•è¯ä¹‹é—´çš„ç›¸å…³åº¦( 0 ~ 1 ä¹‹é—´çš„ä¸€ä¸ªå®æ•°ï¼‰ï¼Œç›¸å…³åº¦éå¸¸é«˜çš„å•è¯å¾€å¾€æ‹¥æœ‰ç›¸åŒçš„å«ä¹‰ã€‚ä¸è¿‡ä¸è¦è¢«â€œæ½œåœ¨è¯­ä¹‰â€çš„åç§°æ‰€è¿·æƒ‘ï¼Œæ‰€è°“çš„æ½œåœ¨è¯­ä¹‰åªä¸è¿‡æ˜¯ç»Ÿè®¡æ„ä¹‰ä¸Šçš„ç›¸ä¼¼ï¼Œå¦‚æœæƒ³å¾—åˆ°åŒä¹‰è¯è¿˜æ˜¯ä½¿ç”¨åŒä¹‰è¯è¯å…¸é è°±ã€‚LSI å¾—åˆ°çš„è¿‘ä¹‰è¯çš„ç‰¹ç‚¹æ˜¯å®ƒä»¬ä¸ä¸€å®šæ˜¯åŒä¹‰è¯ï¼ˆç”šè‡³è¯æ€§éƒ½å¯èƒ½ä¸åŒï¼‰ï¼Œä½†å®ƒä»¬å¾€å¾€å‡ºç°åœ¨åŒç±»æƒ…æ™¯ä¸‹ï¼ˆæ¯”å¦‚â€œé­”å…½â€ å’Œ â€œdotaâ€)ã€‚ä¸è¿‡äº‹å®ä¸Šç›´æ¥ä½¿ç”¨LSIåšå•è¯ç›¸å…³åº¦è®¡ç®—çš„å¹¶ä¸å¤šï¼Œä¸€æ–¹é¢åœ¨äºç°åœ¨æœ‰ä¸€äº›ç°å¸¸å¥½ç”¨çš„åŒä¹‰è¯è¯å…¸ï¼Œå¦å¤–ç›¸å¯¹æ— ç›‘ç£çš„å­¦ä¹ å¤§å®¶è¿˜æ˜¯æ›´ä¿¡ä»»æœ‰ç›‘ç£çš„å­¦ä¹ ï¼ˆåˆ†ç±»ï¼‰å¾—åˆ°çš„ç»“æœã€‚</p>
</li>
<li><p>èšç±»<br>ç›´æ¥ç”¨ LSI èšç±»çš„æƒ…æ™¯è¿˜æ²¡æœ‰è§è¿‡ï¼Œä½†ä½¿ç”¨è¯¥ç³»åˆ—ç®—æ³•çš„åç»­å˜ç§ PLSI, LDA è¿›è¡Œèšç±»çš„çš„ç¡®æœ‰ä¸€äº›ã€‚å…¶ä¸­LDAèšç±»è¿˜æœ‰äº›é“ç†ï¼ˆå› ä¸ºå®ƒæœ¬èº«å°±å‡è®¾äº†æ½œåœ¨topicçš„è”åˆæ¦‚ç‡åˆ†å¸ƒï¼‰ï¼Œç”¨ LSI è¿›è¡Œèšç±»å…¶å®å¹¶ä¸åˆé€‚ã€‚æœ¬è´¨ä¸Š LSI åœ¨æ‰¾ç‰¹å¾å­ç©ºé—´ï¼Œè€Œèšç±»æ–¹æ³•è¦æ‰¾çš„æ˜¯å®ä¾‹åˆ†ç»„ã€‚ LSI è™½ç„¶èƒ½å¾—åˆ°çœ‹èµ·æ¥è²Œä¼¼æ˜¯èšç±»çš„ç»“æœï¼Œä½†å…¶æ„ä¹‰ä¸è§å¾—æ˜¯èšç±»æ‰€æƒ³å¾—åˆ°çš„ã€‚ä¸€ä¸ªæ˜æ˜¾çš„ä¾‹å­å°±æ˜¯ï¼Œå¯¹äºåˆ†å¸ƒä¸å¹³å‡çš„æ ·æœ¬é›†ï¼ˆæ¯”å¦‚æ–°é—»ç±»çš„æ–‡ç« æœ‰1000ç¯‡ï¼Œè€Œæ–‡å­¦ç±»çš„æ–‡ç« åªæœ‰10ç¯‡ï¼‰ï¼Œ LSI/PLSI å¾—åˆ°çš„å¾€å¾€æ˜¯ç›¸å¯¹å¹³å‡çš„ç»“æœ(Aç±»500ç¯‡ï¼ŒBç±»600ç¯‡)ï¼Œè¿™ç§æƒ…å†µä¸‹æ ¹æœ¬æ— æ³•å¾—åˆ°å¥½çš„èšç±»ç»“æœã€‚ç›¸å¯¹ä¼ ç»Ÿèšç±»æ–¹æ³•k-meansï¼Œ LSI ç³»åˆ—ç®—æ³•ä¸ä»…å­˜åœ¨ä¿¡æ¯çš„åå·®ï¼ˆä¸¢å¤±å’Œæ”¹å˜ï¼‰ï¼Œè€Œä¸”ä¸èƒ½å¤„ç†åˆ†å¸ƒä¸å‡çš„æ ·æœ¬é›†ã€‚</p>
</li>
</ol>
<h3 id="å®éªŒè¯´æ˜"><a href="#å®éªŒè¯´æ˜" class="headerlink" title="å®éªŒè¯´æ˜"></a>å®éªŒè¯´æ˜</h3><p>ç”¨äº†pythonçš„gensimåŒ…<br>ç°æœ‰çš„æ•°æ®æ˜¯438æ¡æ ‡å‡†é—®é¢˜ä»¥åŠ3300æ¡äººå·¥é—®é¢˜ï¼ˆå¯ä»¥è½¬åŒ–ä¸º438æ¡æ ‡å‡†é—®é¢˜ï¼‰ï¼Œç°åœ¨éœ€è¦å¯¹äººå·¥é—®é¢˜åšä¸€ä¸ªå½’ä¸€åŒ–ã€‚<br>è¿™é‡Œé‡‡ç”¨LSIæ¨¡å‹è¿›è¡Œå»ºæ¨¡å®éªŒï¼Œæ­¥éª¤å¦‚ä¸‹ã€‚</p>
<h3 id="å¯¼å…¥åŒ…"><a href="#å¯¼å…¥åŒ…" class="headerlink" title="å¯¼å…¥åŒ…"></a>å¯¼å…¥åŒ…</h3><pre>
# -*- coding: utf-8 -*-
from gensim import corpora, models, similarities
import logging
import jieba
import jieba.posseg as pseg
# é˜²æ­¢ä¹±ç 
import sys
reload(sys)
sys.setdefaultencoding('utf-8')
# æ‰“å°logä¿¡æ¯
logging.basicConfig(format='%(asctime)s : %(levelname)s : %(message)s', level=logging.INFO)</pre>


<h3 id="æ–‡æœ¬é¢„å¤„ç†"><a href="#æ–‡æœ¬é¢„å¤„ç†" class="headerlink" title="æ–‡æœ¬é¢„å¤„ç†"></a>æ–‡æœ¬é¢„å¤„ç†</h3><pre>
# æ ‡å‡†FAQï¼Œä¸€è¡Œå¯¹åº”ä¸€æ¡é—®å¥
f = open('FAQuniq.txt', 'r')
# å¯¹é—®å¥è¿›è¡Œåˆ†è¯
texts = [[word for word in jieba.cut(document, cut_all = False)] for document in f]

# æŠ½å–ä¸€ä¸ªbag-of-wordsï¼Œå°†æ–‡æ¡£çš„tokenæ˜ å°„ä¸ºid
dictionary = corpora.Dictionary(texts)
# ä¿å­˜è¯å…¸
dictionary.save('LSI.dict')

# äº§ç”Ÿæ–‡æ¡£å‘é‡ï¼Œå°†ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºçš„æ–‡æ¡£è½¬æ¢ä¸ºç”¨idå’Œè¯é¢‘è¡¨ç¤ºçš„æ–‡æ¡£å‘é‡
corpus = [dictionary.doc2bow(text) for text in texts]

# åŸºäºè¿™äº›â€œè®­ç»ƒæ–‡æ¡£â€è®¡ç®—ä¸€ä¸ªTF-IDFæ¨¡å‹
tfidf = models.TfidfModel(corpus)

# è½¬åŒ–æ–‡æ¡£å‘é‡ï¼Œå°†ç”¨è¯é¢‘è¡¨ç¤ºçš„æ–‡æ¡£å‘é‡è¡¨ç¤ºä¸ºä¸€ä¸ªç”¨tf-idfå€¼è¡¨ç¤ºçš„æ–‡æ¡£å‘é‡
corpus_tfidf = tfidf[corpus]

# è®­ç»ƒLSIæ¨¡å‹ å³å°†è®­ç»ƒæ–‡æ¡£å‘é‡ç»„æˆçš„çŸ©é˜µSVDåˆ†è§£ï¼Œå¹¶åšä¸€ä¸ªç§©ä¸º2çš„è¿‘ä¼¼SVDåˆ†è§£
lsi = models.LsiModel(corpus_tfidf, id2word=dictionary, num_topics=100)

# ä¿å­˜æ¨¡å‹
lsi.save('LSI.pkl')
lsi.print_topics(20)</pre>


<h3 id="åˆå§‹åŒ–éªŒè¯performanceçš„æ–‡ä»¶"><a href="#åˆå§‹åŒ–éªŒè¯performanceçš„æ–‡ä»¶" class="headerlink" title="åˆå§‹åŒ–éªŒè¯performanceçš„æ–‡ä»¶"></a>åˆå§‹åŒ–éªŒè¯performanceçš„æ–‡ä»¶</h3><p>checkFileçš„æ¯è¡Œæ ¼å¼ä¸ºï¼š</p>
<pre>åŸå§‹é—®é¢˜çš„docidï¼šå¯¹åº”çš„æ ‡å‡†é—®é¢˜çš„topicid</pre>

<p>æŠŠå®ƒå­˜åˆ°checkDictè¿™ä¸ªdictionaryä¸­ï¼Œkeyæ˜¯docidï¼Œvalueæ˜¯topicidã€‚</p>
<pre>
checkDict=dict()
def getCheckId():
    fcheck=open('checkFile.txt')
    for line in fcheck:
        line=line.strip('\n')
        if (len(line)==0):
            continue
        docid=line.split(":")[0]
        topicid=line.split(":")[1]
        checkDict[int(docid)]=int(topicid)
getCheckId()</pre>

<h3 id="å½’ä¸€åŒ–ï¼è®¡ç®—æ–‡æ¡£ç›¸ä¼¼åº¦"><a href="#å½’ä¸€åŒ–ï¼è®¡ç®—æ–‡æ¡£ç›¸ä¼¼åº¦" class="headerlink" title="å½’ä¸€åŒ–ï¼è®¡ç®—æ–‡æ¡£ç›¸ä¼¼åº¦"></a>å½’ä¸€åŒ–ï¼è®¡ç®—æ–‡æ¡£ç›¸ä¼¼åº¦</h3><pre>
# å»ºç´¢å¼•
index = similarities.MatrixSimilarity(lsi[corpus])

# åˆå§‹åŒ–åˆ†æ•°
score1=0
score2=0
score3=0

# è¯»å–æ–‡ä»¶ï¼Œæ–‡ä»¶çš„æ¯è¡Œæ ¼å¼ä¸ºä¸€ä¸ªåŸå§‹é—®å¥
f2=open('ORIFAQ3330.txt','r')
# countçš„ä½œç”¨æ˜¯å’ŒcheckFileçš„docidï¼Œå³checkDictçš„keyå¯¹åº”
count=1
for query in f2:
    # è·å–è¯¥åŸå§‹é—®å¥æœ¬åº”å¯¹åº”çš„æ­£ç¡®æ ‡å‡†é—®å¥
    if (not checkDict.has_key(count)):
        count+=1
        continue
    checkId=checkDict[count]
    # å°†é—®å¥å‘é‡åŒ–
    query_bow = dictionary.doc2bow(jieba.cut(query, cut_all = False))
    # å†ç”¨ä¹‹å‰è®­ç»ƒå¥½çš„LSIæ¨¡å‹å°†å…¶æ˜ å°„åˆ°äºŒç»´çš„topicç©ºé—´ï¼š
    query_lsi = lsi[query_bow]
    # è®¡ç®—å…¶å’Œindexä¸­docçš„ä½™å¼¦ç›¸ä¼¼åº¦äº†ï¼š
    sims = index[query_lsi]
    sort_sims = sorted(enumerate(sims), key=lambda item: -item[1])
    # æ‰¾å‡ºæœ€ç›¸å…³çš„ä¸‰ç¯‡æ–‡æ¡£ï¼Œè®¡ç®—è¿™ä¸‰ç¯‡æ–‡æ¡£æ˜¯å¦åŒ…æ‹¬æ ‡å‡†é—®å¥ï¼Œå¦‚æœæ–‡æ¡£å°±æ˜¯æ ‡å‡†é—®å¥ï¼Œå¯¹åº”çš„åˆ†æ•°åŠ 1
    if (checkId==sort_sims[0][0]):
        score1+=1
    elif (checkId==sort_sims[1][0]):
        score2+=1
    elif (checkId==sort_sims[2][0]):
        score3+=1
    count+=1</pre>

<h3 id="æ‰“å°åˆ†æ•°"><a href="#æ‰“å°åˆ†æ•°" class="headerlink" title="æ‰“å°åˆ†æ•°"></a>æ‰“å°åˆ†æ•°</h3><pre>
print "Score1: ".format(score1*1.0/count)
print "Score2: ".format(score2*1.0/count)
print "Score3: ".format(score3*1.0/count)</pre>

<h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>å…¶å®è¿™é‡Œçš„ç»“æœéå¸¸å·®ï¼ŒåŸå› æ˜¯æ–‡æ¡£ï¼ˆæ¯ä¸€æ¡é—®å¥ï¼‰å¤ªçŸ­ï¼Œåªæœ‰åå‡ ä¸ªå­—ï¼Œå¦å¤–æ–‡æ¡£æ•°å¤ªå°‘ï¼ŒLSIé™ç»´ç‰ºç‰²äº†å‡†ç¡®ç‡ï¼Œä¸‹ä¸€ä¸ªå®éªŒLDAçš„å‡†ç¡®ç‡ç›¸æ¯”ä¼šé«˜å¾ˆå¤šã€‚<br>å¦å¤–ï¼Œæœ¬æ¬¡å®éªŒæ‰€ç”¨çš„æ ·æœ¬åˆ†å¸ƒå¹¶ä¸å‡åŒ€ï¼Œâ€œæœªæ”¶åˆ°å¥–åŠ±â€ç±»ä¼¼é—®é¢˜å‡ºç°çš„é¢‘ç‡æ¯”â€œè½¯ä»¶æ— å£°éŸ³â€ç±»ä¼¼é—®é¢˜å‡ºç°çš„é¢‘ç‡è¦é«˜å¾ˆå¤šã€‚<strong><em>é‡ç”³ï¼šLSI/PLSI å¾—åˆ°çš„å¾€å¾€æ˜¯ç›¸å¯¹å¹³å‡çš„ç»“æœ(Aç±»500ç¯‡ï¼ŒBç±»600ç¯‡)ï¼Œè¿™ç§æƒ…å†µä¸‹æ ¹æœ¬æ— æ³•å¾—åˆ°å¥½çš„èšç±»ç»“æœã€‚ç›¸å¯¹ä¼ ç»Ÿèšç±»æ–¹æ³•k-meansï¼Œ LSI ç³»åˆ—ç®—æ³•ä¸ä»…å­˜åœ¨ä¿¡æ¯çš„åå·®ï¼ˆä¸¢å¤±å’Œæ”¹å˜ï¼‰ï¼Œè€Œä¸”ä¸èƒ½å¤„ç†åˆ†å¸ƒä¸å‡çš„æ ·æœ¬é›†ã€‚</em></strong></p>
<h3 id="LSI-ç¼ºé™·"><a href="#LSI-ç¼ºé™·" class="headerlink" title="LSI ç¼ºé™·"></a>LSI ç¼ºé™·</h3><p>å¸¸ç”¨çš„VSMæ–‡æœ¬è¡¨ç¤ºæ¨¡å‹ä¸­æœ‰ä¸¤ä¸ªä¸»è¦çš„ç¼ºé™·ï¼š</p>
<ol>
<li><p>è¯¥æ¨¡å‹å‡è®¾æ‰€æœ‰ç‰¹å¾è¯æ¡ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹ã€äº’ä¸å½±å“çš„ï¼ˆæœ´ç´ è´å¶æ–¯ä¹Ÿæ˜¯è¿™ä¸ªæ€æƒ³ï¼‰ï¼Œå³è¯¥æ¨¡å‹è¿˜æ˜¯åŸºäºâ€œè¯è¢‹â€æ¨¡å‹ï¼ˆåº”è¯¥è¯´æ‰€æœ‰åˆ©ç”¨VSMæ¨¡å‹æ²¡æœ‰è¿›è¡Œæ½œåœ¨è¯­ä¹‰åˆ†æçš„ç®—æ³•éƒ½æ˜¯åŸºäºâ€œè¯è¢‹â€å‡è®¾ï¼‰ã€‚</p>
</li>
<li><p>æ²¡æœ‰è¿›è¡Œç‰¹å¾é™ç»´ï¼Œç‰¹å¾ç»´æ•°å¯èƒ½ä¼šå¾ˆé«˜ï¼Œå‘é‡ç©ºé—´å¯èƒ½å¾ˆå¤§ï¼Œå¯¹å­˜å‚¨å’Œè®¡ç®—èµ„æºè¦æ±‚ä¼šæ¯”è¾ƒé«˜ã€‚</p>
</li>
</ol>
<p>LSIçš„åŸºæœ¬æ€æƒ³æ˜¯æ–‡æœ¬ä¸­çš„è¯ä¸è¯ä¹‹é—´ä¸æ˜¯å­¤ç«‹çš„ï¼Œå­˜åœ¨ç€æŸç§æ½œåœ¨çš„è¯­ä¹‰å…³ç³»ï¼Œé€šè¿‡å¯¹æ ·æœ¬æ•°æ®çš„ç»Ÿè®¡åˆ†æï¼Œè®©æœºå™¨è‡ªåŠ¨æŒ–æ˜å‡ºè¿™äº›æ½œåœ¨çš„è¯­ä¹‰å…³ç³»ï¼Œå¹¶æŠŠè¿™äº›å…³ç³»è¡¨ç¤ºæˆè®¡ç®—æœºå¯ä»¥â€ç†è§£â€çš„æ¨¡å‹ã€‚å®ƒå¯ä»¥æ¶ˆé™¤è¯åŒ¹é…è¿‡ç¨‹ä¸­çš„åŒä¹‰å’Œå¤šä¹‰ç°è±¡ã€‚å®ƒå¯ä»¥å°†ä¼ ç»Ÿçš„VSMé™ç§©åˆ°ä¸€ä¸ªä½ç»´çš„è¯­ä¹‰ç©ºé—´ä¸­ï¼Œåœ¨è¯¥è¯­ä¹‰ç©ºé—´ä¸­è®¡ç®—æ–‡æ¡£çš„ç›¸ä¼¼åº¦ç­‰ã€‚æ€»çš„è¯´æ¥ï¼ŒLSIå°±æ˜¯åˆ©ç”¨è¯çš„è¯­ä¹‰å…³ç³»å¯¹VSMæ¨¡å‹è¿›è¡Œé™ç»´ï¼Œå¹¶æé«˜åˆ†ç±»çš„æ•ˆæœã€‚</p>
<blockquote>
<p>å‚è€ƒé“¾æ¥<br><a href="http://www.zwbk.org/MyLemmaShow.aspx?lid=257113" target="_blank" rel="external">http://www.zwbk.org/MyLemmaShow.aspx?lid=257113</a><br><a href="http://www.52nlp.cn/%E5%A6%82%E4%BD%95%E8%AE%A1%E7%AE%97%E4%B8%A4%E4%B8%AA%E6%96%87%E6%A1%A3%E7%9A%84%E7%9B%B8%E4%BC%BC%E5%BA%A6%E4%BA%8C" target="_blank" rel="external">http://www.52nlp.cn/%E5%A6%82%E4%BD%95%E8%AE%A1%E7%AE%97%E4%B8%A4%E4%B8%AA%E6%96%87%E6%A1%A3%E7%9A%84%E7%9B%B8%E4%BC%BC%E5%BA%A6%E4%BA%8C</a></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LDA/">LDA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cluster/">cluster</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/machine-learning/">machine learning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/topic-modeling/">topic modeling</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/machine-learning/">machine learning</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-GibbsLDA-A-C-C-ä½¿ç”¨å¿ƒå¾—" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/25/GibbsLDA-A-C-C-ä½¿ç”¨å¿ƒå¾—/" class="article-date">
  	<time datetime="2016-05-25T04:20:35.000Z" itemprop="datePublished">2016-05-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/25/GibbsLDA-A-C-C-ä½¿ç”¨å¿ƒå¾—/">GibbsLDA++: A C/C++ ä½¿ç”¨å¿ƒå¾—</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-é‚£äº›å¹´æˆ‘é‡è¿‡çš„pythonçš„å‘" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/25/é‚£äº›å¹´æˆ‘é‡è¿‡çš„pythonçš„å‘/" class="article-date">
  	<time datetime="2016-05-25T03:39:53.000Z" itemprop="datePublished">2016-05-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/25/é‚£äº›å¹´æˆ‘é‡è¿‡çš„pythonçš„å‘/">é‚£äº›å¹´æˆ‘é‡è¿‡çš„pythonçš„å‘</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="tag-è¯»æ–‡ä»¶-å¼ºè½¬"><a href="#tag-è¯»æ–‡ä»¶-å¼ºè½¬" class="headerlink" title="tag: è¯»æ–‡ä»¶ å¼ºè½¬"></a>tag: è¯»æ–‡ä»¶ å¼ºè½¬</h2><p><strong>æ–‡ä»¶çš„è¡Œæ ¼å¼ï¼š</strong></p>
<pre>0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000 0.010000</pre>

<p><strong>è¦æ±‚ï¼š</strong> æŠŠæ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œè½¬æˆfloatçš„list<br><strong>é”™è¯¯ä»£ç ï¼š</strong></p>
<pre>
for line in f:
  v=[float(i) for i in line.split(" ")]</pre>

<p><strong>é”™è¯¯ï¼š</strong></p>
<pre>Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
ValueError: could not convert string to float: </module></stdin></pre>

<p><strong>åŸå› ï¼š</strong> æŒ‰è¡Œè¯»å–æ–‡ä»¶ä¸‹çš„æ¢è¡Œç¬¦é—®é¢˜å¼•èµ·ã€‚ç ”ç©¶ğŸ‘‡ä¸€ä¸ªå®˜æ–¹ç¤ºä¾‹ï¼š</p>
<pre>str = "Line1-abcdef \nLine2-abc \nLine4-abcd";
print str.split( );
print str.split(' ', 1 );</pre>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<pre>
['Line1-abcdef', 'Line2-abc', 'Line4-abcd']
['Line1-abcdef', '\nLine2-abc \nLine4-abcd']</pre>

<p>ä¹Ÿå°±æ˜¯è¯´æŒ‰ç¬¬äºŒç§splitæ–¹æ³•å‡ºæ¥çš„listå…ƒç´ åŒ…å«äº†\n</p>
<p><strong>è§£å†³ï¼š</strong></p>
<pre>line=line.strip('\n')</pre>

<p>æˆ–è€…ç›´æ¥</p>
<pre>line=line.split()</pre>

<p><strong>ä¸€æ®µå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<pre>
FAQlist=dict()
f=open('FAQuniq.txt.gbk.seg.pos.theta','r')
count=0
for line in f:
    if(count==0):
        print line
        line=line.strip('\n')
        try:
            vector=[float(i) for i in line.split()]
            FAQlist[count]=vector
        except ValueError,e:
            print "error"
    count+=1</pre>

<p><strong>æ•ˆæœï¼š</strong></p>
<pre>
  [0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01]</pre>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python-debug/">python debug</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/python/">python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-APèšç±»" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/19/APèšç±»/" class="article-date">
  	<time datetime="2016-05-19T13:42:04.000Z" itemprop="datePublished">2016-05-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/19/APèšç±»/">APèšç±»</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>APç®—æ³•çš„å…·ä½“å·¥ä½œè¿‡ç¨‹å¦‚ä¸‹ï¼šå…ˆè®¡ç®—Nä¸ªç‚¹ä¹‹é—´çš„ç›¸ä¼¼åº¦å€¼ï¼Œå°†å€¼æ”¾åœ¨SçŸ©é˜µä¸­ï¼Œå†é€‰å–På€¼(ä¸€èˆ¬å–Sçš„ä¸­å€¼)ã€‚è®¾ç½®ä¸€ä¸ªæœ€å¤§è¿­ä»£æ¬¡æ•°(æ–‡ä¸­è®¾é»˜è®¤å€¼ä¸º1000)ï¼Œè¿­ä»£è¿‡ç¨‹å¼€å§‹åï¼Œè®¡ç®—æ¯ä¸€æ¬¡çš„Rå€¼å’ŒAå€¼ï¼Œæ ¹æ®R(k,k)+A(k,k)å€¼æ¥åˆ¤æ–­æ˜¯å¦ä¸ºèšç±»ä¸­å¿ƒ(æ–‡ä¸­æŒ‡å®šå½“(R(k,k)+A(k,k))ï¼0æ—¶è®¤ä¸ºæ˜¯ä¸€ä¸ªèšç±»ä¸­å¿ƒ)ï¼Œå½“è¿­ä»£æ¬¡æ•°è¶…è¿‡æœ€å¤§å€¼( å³maxitså€¼)æˆ–è€…å½“èšç±»ä¸­å¿ƒè¿ç»­å¤šå°‘æ¬¡è¿­ä»£ä¸å‘ç”Ÿæ”¹å˜( å³convitså€¼)æ—¶ç»ˆæ­¢è®¡ç®—(æ–‡ä¸­è®¾å®šè¿ç»­50æ¬¡è¿­ä»£è¿‡ç¨‹ä¸å‘ç”Ÿæ”¹å˜æ˜¯ç»ˆæ­¢è®¡ç®—)ã€‚</p>
<p>Affinity Propagation (AP) èšç±»æ˜¯æœ€è¿‘åœ¨Scienceæ‚å¿—ä¸Šæå‡ºçš„ä¸€ç§æ–°çš„èšç±»ç®—æ³•ã€‚å®ƒæ ¹æ®Nä¸ªæ•°æ®ç‚¹ä¹‹é—´çš„ç›¸ä¼¼åº¦è¿›è¡Œèšç±»,è¿™äº›ç›¸ä¼¼åº¦å¯ä»¥æ˜¯å¯¹ç§°çš„,å³ä¸¤ä¸ªæ•°æ®ç‚¹äº’ç›¸ä¹‹é—´çš„ç›¸ä¼¼åº¦ä¸€æ ·(å¦‚æ¬§æ°è·ç¦»);ä¹Ÿå¯ä»¥æ˜¯ä¸å¯¹ç§°çš„,å³ä¸¤ä¸ªæ•°æ®ç‚¹äº’ç›¸ä¹‹é—´çš„ç›¸ä¼¼åº¦ä¸ç­‰ã€‚è¿™äº›ç›¸ä¼¼åº¦ç»„æˆNÃ—Nçš„ç›¸ä¼¼åº¦çŸ©é˜µS(å…¶ä¸­Nä¸ºæœ‰Nä¸ªæ•°æ®ç‚¹)ã€‚APç®—æ³•ä¸éœ€è¦äº‹å…ˆæŒ‡å®šèšç±»æ•°ç›®,ç›¸åå®ƒå°†æ‰€æœ‰çš„æ•°æ®ç‚¹éƒ½ä½œä¸ºæ½œåœ¨çš„èšç±»ä¸­å¿ƒ,ç§°ä¹‹ä¸ºexemplarã€‚ä»¥SçŸ©é˜µçš„å¯¹è§’çº¿ä¸Šçš„æ•°å€¼s(k, k)ä½œä¸ºkç‚¹èƒ½å¦æˆä¸ºèšç±»ä¸­å¿ƒçš„è¯„åˆ¤æ ‡å‡†,è¿™æ„å‘³ç€è¯¥å€¼è¶Šå¤§,è¿™ä¸ªç‚¹æˆä¸ºèšç±»ä¸­å¿ƒçš„å¯èƒ½æ€§ä¹Ÿå°±è¶Šå¤§,è¿™ä¸ªå€¼åˆç§°ä½œå‚è€ƒåº¦p (preference)ã€‚<br>åœ¨è¿™é‡Œä»‹ç»å‡ ä¸ªæ–‡ä¸­å¸¸å‡ºç°çš„åè¯ï¼š<br>exemplarï¼šæŒ‡çš„æ˜¯èšç±»ä¸­å¿ƒã€‚<br>similarityï¼šæ•°æ®ç‚¹iå’Œç‚¹jçš„ç›¸ä¼¼åº¦è®°ä¸ºS(iï¼Œj)ã€‚æ˜¯æŒ‡ç‚¹jä½œä¸ºç‚¹içš„èšç±»ä¸­å¿ƒçš„ç›¸ä¼¼åº¦ã€‚ä¸€èˆ¬ä½¿ç”¨æ¬§æ°è·ç¦»æ¥è®¡ç®—ï¼Œå¦‚ï¼|| ||ã€‚æ–‡ä¸­ï¼Œæ‰€æœ‰ç‚¹ä¸ç‚¹çš„ç›¸ä¼¼åº¦å€¼å…¨éƒ¨å–ä¸ºè´Ÿå€¼ã€‚å› ä¸ºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç›¸ä¼¼åº¦å€¼è¶Šå¤§è¯´æ˜ç‚¹ä¸ç‚¹çš„è·ç¦»è¶Šè¿‘ï¼Œä¾¿äºåé¢çš„æ¯”è¾ƒè®¡ç®—ã€‚<br>preferenceï¼šæ•°æ®ç‚¹içš„å‚è€ƒåº¦ç§°ä¸ºP(i)æˆ–S(i,i)ã€‚æ˜¯æŒ‡ç‚¹iä½œä¸ºèšç±»ä¸­å¿ƒçš„å‚è€ƒåº¦ã€‚ä¸€èˆ¬å–Sç›¸ä¼¼åº¦å€¼çš„ä¸­å€¼ã€‚<br>Responsibility:R(i,k)ç”¨æ¥æè¿°ç‚¹ké€‚åˆä½œä¸ºæ•°æ®ç‚¹içš„èšç±»ä¸­å¿ƒçš„ç¨‹åº¦ã€‚<br>Availability:A(i,k)ç”¨æ¥æè¿°ç‚¹ié€‰æ‹©ç‚¹kä½œä¸ºå…¶èšç±»ä¸­å¿ƒçš„é€‚åˆç¨‹åº¦ã€‚</p>
<p>Script output:<br>Estimated number of clusters: 3<br>Homogeneity: 0.872<br>Completeness: 0.872<br>V-measure: 0.872<br>Adjusted Rand Index: 0.912<br>Adjusted Mutual Information: 0.871<br>Silhouette Coefficient: 0.753</p>
<p>Python source code: plot_affinity_propagation.py<br>print(<strong>doc</strong>)</p>
<p>from sklearn.cluster import AffinityPropagation<br>from sklearn import metrics<br>from sklearn.datasets.samples_generator import make_blobs</p>
<p>##############################################################################</p>
<h1 id="Generate-sample-data"><a href="#Generate-sample-data" class="headerlink" title="Generate sample data"></a>Generate sample data</h1><p>centers = [[1, 1], [-1, -1], [1, -1]]<br>X, labels_true = make_blobs(n_samples=300, centers=centers, cluster_std=0.5,<br>                            random_state=0)</p>
<p>##############################################################################</p>
<h1 id="Compute-Affinity-Propagation"><a href="#Compute-Affinity-Propagation" class="headerlink" title="Compute Affinity Propagation"></a>Compute Affinity Propagation</h1><p>af = AffinityPropagation(preference=-50).fit(X)<br>cluster_centers_indices = af.cluster_centers<em>indices</em><br>labels = af.labels_</p>
<p>n<em>clusters</em> = len(cluster_centers_indices)</p>
<p>print(â€˜Estimated number of clusters: %dâ€™ % n<em>clusters</em>)<br>print(â€œHomogeneity: %0.3fâ€ % metrics.homogeneity_score(labels_true, labels))<br>print(â€œCompleteness: %0.3fâ€ % metrics.completeness_score(labels_true, labels))<br>print(â€œV-measure: %0.3fâ€ % metrics.v_measure_score(labels_true, labels))<br>print(â€œAdjusted Rand Index: %0.3fâ€<br>      % metrics.adjusted_rand_score(labels_true, labels))<br>print(â€œAdjusted Mutual Information: %0.3fâ€<br>      % metrics.adjusted_mutual_info_score(labels_true, labels))<br>print(â€œSilhouette Coefficient: %0.3fâ€<br>      % metrics.silhouette_score(X, labels, metric=â€™sqeuclideanâ€™))</p>
<p>##############################################################################</p>
<h1 id="Plot-result"><a href="#Plot-result" class="headerlink" title="Plot result"></a>Plot result</h1><p>import matplotlib.pyplot as plt<br>from itertools import cycle</p>
<p>plt.close(â€˜allâ€™)<br>plt.figure(1)<br>plt.clf()</p>
<p>colors = cycle(â€˜bgrcmykbgrcmykbgrcmykbgrcmykâ€™)<br>for k, col in zip(range(n<em>clusters</em>), colors):<br>    class_members = labels == k<br>    cluster_center = X[cluster_centers_indices[k]]<br>    plt.plot(X[class_members, 0], X[class_members, 1], col + â€˜.â€™)<br>    plt.plot(cluster_center[0], cluster_center[1], â€˜oâ€™, markerfacecolor=col,<br>             markeredgecolor=â€™kâ€™, markersize=14)<br>    for x in X[class_members]:<br>        plt.plot([cluster_center[0], x[0]], [cluster_center[1], x[1]], col)</p>
<p>plt.title(â€˜Estimated number of clusters: %dâ€™ % n<em>clusters</em>)<br>plt.show()</p>
<blockquote>
<p>å‚è€ƒé“¾æ¥<br><a href="http://scikit-learn.org/stable/modules/clustering.html" target="_blank" rel="external">http://scikit-learn.org/stable/modules/clustering.html</a><br><a href="http://blog.csdn.net/u010695420/article/details/42239465" target="_blank" rel="external">http://blog.csdn.net/u010695420/article/details/42239465</a></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-LDAéªŒè¯" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/19/LDAéªŒè¯/" class="article-date">
  	<time datetime="2016-05-19T13:14:42.000Z" itemprop="datePublished">2016-05-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/19/LDAéªŒè¯/">LDAéªŒè¯</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Gensim-and-LDA-Training-and-Prediction" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/18/Gensim-and-LDA-Training-and-Prediction/" class="article-date">
  	<time datetime="2016-05-18T12:46:16.000Z" itemprop="datePublished">2016-05-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/18/Gensim-and-LDA-Training-and-Prediction/">Gensim and LDA--Training and Prediction</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <pre>
# install the related python packages
>>> pip install numpy
>>> pip install scipy
>>> pip install gensim
>>> pip install jieba

from gensim import corpora, models, similarities
import logging
import jieba

# configuration
logging.basicConfig(format='%(asctime)s : %(levelname)s : %(message)s', level=logging.INFO)

# load data from file
f = open('newfile.txt', 'r')
documents = f.readlines()

ï¼ƒ tokenize
texts = [[word for word in jieba.cut(document, cut_all = False)] for document in documents]

# load id->word mapping (the dictionary)
dictionary = corpora.Dictionary(texts)

# word must appear >10 times, and no more than 40% documents
dictionary.filter_extremes(no_below=40, no_above=0.1)

# save dictionary
dictionary.save('dict_v1.dict')

# load corpus
corpus = [dictionary.doc2bow(text) for text in texts]

# initialize a model
tfidf = models.TfidfModel(corpus)

# use the model to transform vectors, apply a transformation to a whole corpus
corpus_tfidf = tfidf[corpus]

# extract 100 LDA topics, using 1 pass and updating once every 1 chunk (10,000 documents), using 500 iterations
lda = models.LdaModel(corpus_tfidf, id2word=dictionary, num_topics=100, iterations=500)

# save model to files
lda.save('mylda_v1.pkl')

# print topics composition, and their scores, for the first document. You will see that only few topics are represented; the others have a nil score.
for index, score in sorted(lda[corpus_tfidf[0]], key=lambda tup: -1*tup[1]):
    print "Score: {}\t Topic: {}".format(score, lda.print_topic(index, 10))

# print the most contributing words for 100 randomly selected topics
lda.print_topics(100)

# load model and dictionary
model = models.LdaModel.load('mylda_v1.pkl')
dictionary = corpora.Dictionary.load('dict_v1.dict')

# predict unseen data
query = "æœªæ”¶åˆ°å¥–åŠ±"
query_bow = dictionary.doc2bow(jieba.cut(query, cut_all = False))
for index, score in sorted(model[query_bow], key=lambda tup: -1*tup[1]):
    print "Score: {}\t Topic: {}".format(score, model.print_topic(index, 20))

# if you want to predict many lines of data in a file, do the followings
f = open('newfile.txt', 'r')
documents = f.readlines()
texts = [[word for word in jieba.cut(document, cut_all = False)] for document in documents]
corpus = [dictionary.doc2bow(text) for text in texts]

# only print the topic with the highest score
for c in corpus:
    flag = True
    for index, score in sorted(model[c], key=lambda tup: -1*tup[1]):
        if flag:
            print "Score: {}\t Topic: {}".format(score, model.print_topic(index, 20))</pre>

<h1 id="Tips"><a href="#Tips" class="headerlink" title="Tips:"></a>Tips:</h1><p>If you occur encoding problems, you can try the following code</p>
<pre>
add it at the beginning of your python file
# -*- coding: utf-8 -*-

# also, do the followings
import sys
reload(sys)
sys.setdefaultencoding('utf-8')

# the following code may lead to encoding problem when there're Chinese characters
model.show_topics(-1, 5)

# use this instead
model.print_topics(-1, 5)</pre>


<p>You can see step-by-step output by the following references.</p>
<blockquote>
<p>References:<br><a href="https://radimrehurek.com/gensim/tut2.html" target="_blank" rel="external">https://radimrehurek.com/gensim/tut2.html</a> official guide (en)<br><a href="http://blog.csdn.net/questionfish/article/details/46725475" target="_blank" rel="external">http://blog.csdn.net/questionfish/article/details/46725475</a>  official guide (ch)<br><a href="https://radimrehurek.com/gensim/wiki.html#latent-dirichlet-allocation" target="_blank" rel="external">https://radimrehurek.com/gensim/wiki.html#latent-dirichlet-allocation</a></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LDA/">LDA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cluster/">cluster</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gensim/">gensim</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/machine-learning/">machine learning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/topic-modeling/">topic modeling</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/machine-learning/">machine learning</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-python-jiebaåˆ†è¯" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/18/python-jiebaåˆ†è¯/" class="article-date">
  	<time datetime="2016-05-18T03:51:17.000Z" itemprop="datePublished">2016-05-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/18/python-jiebaåˆ†è¯/">python-jieba åˆ†è¯ -- å®˜æ–¹æ–‡æ¡£æˆªå–</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="jieba"><a href="#jieba" class="headerlink" title="jieba"></a>jieba</h1><p>â€œç»“å·´â€ä¸­æ–‡åˆ†è¯ï¼šåšæœ€å¥½çš„ Python ä¸­æ–‡åˆ†è¯ç»„ä»¶</p>
<h1 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h1><ul>
<li>æ”¯æŒä¸‰ç§åˆ†è¯æ¨¡å¼ï¼š</li>
</ul>
<ol>
<li>ç²¾ç¡®æ¨¡å¼ï¼Œè¯•å›¾å°†å¥å­æœ€ç²¾ç¡®åœ°åˆ‡å¼€ï¼Œé€‚åˆæ–‡æœ¬åˆ†æï¼›</li>
<li>å…¨æ¨¡å¼ï¼ŒæŠŠå¥å­ä¸­æ‰€æœ‰çš„å¯ä»¥æˆè¯çš„è¯è¯­éƒ½æ‰«æå‡ºæ¥, é€Ÿåº¦éå¸¸å¿«ï¼Œä½†æ˜¯ä¸èƒ½è§£å†³æ­§ä¹‰ï¼›</li>
<li>æœç´¢å¼•æ“æ¨¡å¼ï¼Œåœ¨ç²¾ç¡®æ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œå¯¹é•¿è¯å†æ¬¡åˆ‡åˆ†ï¼Œæé«˜å¬å›ç‡ï¼Œé€‚åˆç”¨äºæœç´¢å¼•æ“åˆ†è¯ã€‚</li>
</ol>
<ul>
<li><p>æ”¯æŒç¹ä½“åˆ†è¯</p>
</li>
<li><p>æ”¯æŒè‡ªå®šä¹‰è¯å…¸</p>
</li>
</ul>
<h1 id="å®‰è£…è¯´æ˜"><a href="#å®‰è£…è¯´æ˜" class="headerlink" title="å®‰è£…è¯´æ˜"></a>å®‰è£…è¯´æ˜</h1><p>ä»£ç å¯¹ Python 2/3 å‡å…¼å®¹</p>
<ul>
<li>å…¨è‡ªåŠ¨å®‰è£…ï¼šeasy_install jieba æˆ–è€… pip install jieba / pip3 install jieba</li>
<li>åŠè‡ªåŠ¨å®‰è£…ï¼šå…ˆä¸‹è½½ <a href="http://pypi.python.org/pypi/jieba/" target="_blank" rel="external">http://pypi.python.org/pypi/jieba/</a> ï¼Œè§£å‹åè¿è¡Œ python setup.py install</li>
<li>æ‰‹åŠ¨å®‰è£…ï¼šå°† jieba ç›®å½•æ”¾ç½®äºå½“å‰ç›®å½•æˆ–è€… site-packages ç›®å½•</li>
</ul>
<p>é€šè¿‡ import jieba æ¥å¼•ç”¨</p>
<h1 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h1><ul>
<li>åŸºäºå‰ç¼€è¯å…¸å®ç°é«˜æ•ˆçš„è¯å›¾æ‰«æï¼Œç”Ÿæˆå¥å­ä¸­æ±‰å­—æ‰€æœ‰å¯èƒ½æˆè¯æƒ…å†µæ‰€æ„æˆçš„æœ‰å‘æ— ç¯å›¾ (DAG)</li>
<li>é‡‡ç”¨äº†åŠ¨æ€è§„åˆ’æŸ¥æ‰¾æœ€å¤§æ¦‚ç‡è·¯å¾„, æ‰¾å‡ºåŸºäºè¯é¢‘çš„æœ€å¤§åˆ‡åˆ†ç»„åˆ</li>
<li>å¯¹äºæœªç™»å½•è¯ï¼Œé‡‡ç”¨äº†åŸºäºæ±‰å­—æˆè¯èƒ½åŠ›çš„ HMM æ¨¡å‹ï¼Œä½¿ç”¨äº† Viterbi ç®—æ³•</li>
</ul>
<h1 id="ä¸»è¦åŠŸèƒ½"><a href="#ä¸»è¦åŠŸèƒ½" class="headerlink" title="ä¸»è¦åŠŸèƒ½"></a>ä¸»è¦åŠŸèƒ½</h1><h3 id="åˆ†è¯"><a href="#åˆ†è¯" class="headerlink" title="åˆ†è¯"></a>åˆ†è¯</h3><p>jieba.cut æ–¹æ³•æ¥å—ä¸‰ä¸ªè¾“å…¥å‚æ•°: éœ€è¦åˆ†è¯çš„å­—ç¬¦ä¸²ï¼›cut_all å‚æ•°ç”¨æ¥æ§åˆ¶æ˜¯å¦é‡‡ç”¨å…¨æ¨¡å¼ï¼›HMM å‚æ•°ç”¨æ¥æ§åˆ¶æ˜¯å¦ä½¿ç”¨ HMM æ¨¡å‹<br>jieba.cut_for_search æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šéœ€è¦åˆ†è¯çš„å­—ç¬¦ä¸²ï¼›æ˜¯å¦ä½¿ç”¨ HMM æ¨¡å‹ã€‚è¯¥æ–¹æ³•é€‚åˆç”¨äºæœç´¢å¼•æ“æ„å»ºå€’æ’ç´¢å¼•çš„åˆ†è¯ï¼Œç²’åº¦æ¯”è¾ƒç»†<br>å¾…åˆ†è¯çš„å­—ç¬¦ä¸²å¯ä»¥æ˜¯ unicode æˆ– UTF-8 å­—ç¬¦ä¸²ã€GBK å­—ç¬¦ä¸²ã€‚æ³¨æ„ï¼šä¸å»ºè®®ç›´æ¥è¾“å…¥ GBK å­—ç¬¦ä¸²ï¼Œå¯èƒ½æ— æ³•é¢„æ–™åœ°é”™è¯¯è§£ç æˆ UTF-8<br>jieba.cut ä»¥åŠ jieba.cut_for_search è¿”å›çš„ç»“æ„éƒ½æ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„ generatorï¼Œå¯ä»¥ä½¿ç”¨ for å¾ªç¯æ¥è·å¾—åˆ†è¯åå¾—åˆ°çš„æ¯ä¸€ä¸ªè¯è¯­(unicode)ï¼Œæˆ–è€…ç”¨ jieba.lcut ä»¥åŠ jieba.lcut_for_search ç›´æ¥è¿”å› list<br>jieba.Tokenizer(dictionary=DEFAULT_DICT) æ–°å»ºè‡ªå®šä¹‰åˆ†è¯å™¨ï¼Œå¯ç”¨äºåŒæ—¶ä½¿ç”¨ä¸åŒè¯å…¸ã€‚jieba.dt ä¸ºé»˜è®¤åˆ†è¯å™¨ï¼Œæ‰€æœ‰å…¨å±€åˆ†è¯ç›¸å…³å‡½æ•°éƒ½æ˜¯è¯¥åˆ†è¯å™¨çš„æ˜ å°„ã€‚</p>
<p>ä»£ç ç¤ºä¾‹</p>
<pre>
# encoding=utf-8
import jieba

seg_list = jieba.cut("æˆ‘æ¥åˆ°åŒ—äº¬æ¸…åå¤§å­¦", cut_all=True)
print("Full Mode: " + "/ ".join(seg_list))  # å…¨æ¨¡å¼

seg_list = jieba.cut("æˆ‘æ¥åˆ°åŒ—äº¬æ¸…åå¤§å­¦", cut_all=False)
print("Default Mode: " + "/ ".join(seg_list))  # ç²¾ç¡®æ¨¡å¼

seg_list = jieba.cut("ä»–æ¥åˆ°äº†ç½‘æ˜“æ­ç ”å¤§å¦")  # é»˜è®¤æ˜¯ç²¾ç¡®æ¨¡å¼
print(", ".join(seg_list))

seg_list = jieba.cut_for_search("å°æ˜ç¡•å£«æ¯•ä¸šäºä¸­å›½ç§‘å­¦é™¢è®¡ç®—æ‰€ï¼Œååœ¨æ—¥æœ¬äº¬éƒ½å¤§å­¦æ·±é€ ")  # æœç´¢å¼•æ“æ¨¡å¼
print(", ".join(seg_list))</pre>

<p>è¾“å‡º:</p>
<p>ã€å…¨æ¨¡å¼ã€‘: æˆ‘/ æ¥åˆ°/ åŒ—äº¬/ æ¸…å/ æ¸…åå¤§å­¦/ åå¤§/ å¤§å­¦</p>
<p>ã€ç²¾ç¡®æ¨¡å¼ã€‘: æˆ‘/ æ¥åˆ°/ åŒ—äº¬/ æ¸…åå¤§å­¦</p>
<p>ã€æ–°è¯è¯†åˆ«ã€‘ï¼šä»–, æ¥åˆ°, äº†, ç½‘æ˜“, æ­ç ”, å¤§å¦    (æ­¤å¤„ï¼Œâ€œæ­ç ”â€å¹¶æ²¡æœ‰åœ¨è¯å…¸ä¸­ï¼Œä½†æ˜¯ä¹Ÿè¢«Viterbiç®—æ³•è¯†åˆ«å‡ºæ¥äº†)</p>
<p>ã€æœç´¢å¼•æ“æ¨¡å¼ã€‘ï¼š å°æ˜, ç¡•å£«, æ¯•ä¸š, äº, ä¸­å›½, ç§‘å­¦, å­¦é™¢, ç§‘å­¦é™¢, ä¸­å›½ç§‘å­¦é™¢, è®¡ç®—, è®¡ç®—æ‰€, å, åœ¨, æ—¥æœ¬, äº¬éƒ½, å¤§å­¦, æ—¥æœ¬äº¬éƒ½å¤§å­¦, æ·±é€ </p>
<h3 id="æ·»åŠ è‡ªå®šä¹‰è¯å…¸"><a href="#æ·»åŠ è‡ªå®šä¹‰è¯å…¸" class="headerlink" title="æ·»åŠ è‡ªå®šä¹‰è¯å…¸"></a>æ·»åŠ è‡ªå®šä¹‰è¯å…¸</h3><p>è½½å…¥è¯å…¸</p>
<p>å¼€å‘è€…å¯ä»¥æŒ‡å®šè‡ªå·±è‡ªå®šä¹‰çš„è¯å…¸ï¼Œä»¥ä¾¿åŒ…å« jieba è¯åº“é‡Œæ²¡æœ‰çš„è¯ã€‚è™½ç„¶ jieba æœ‰æ–°è¯è¯†åˆ«èƒ½åŠ›ï¼Œä½†æ˜¯è‡ªè¡Œæ·»åŠ æ–°è¯å¯ä»¥ä¿è¯æ›´é«˜çš„æ­£ç¡®ç‡<br>ç”¨æ³•ï¼š</p>
<pre>jieba.load_userdict(file_name) # file_name ä¸ºæ–‡ä»¶ç±»å¯¹è±¡æˆ–è‡ªå®šä¹‰è¯å…¸çš„è·¯å¾„</pre>

<p>è¯å…¸æ ¼å¼å’Œ dict.txt ä¸€æ ·ï¼Œä¸€ä¸ªè¯å ä¸€è¡Œï¼›æ¯ä¸€è¡Œåˆ†ä¸‰éƒ¨åˆ†ï¼šè¯è¯­ã€è¯é¢‘ï¼ˆå¯çœç•¥ï¼‰ã€è¯æ€§ï¼ˆå¯çœç•¥ï¼‰ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œé¡ºåºä¸å¯é¢ å€’ã€‚file_name è‹¥ä¸ºè·¯å¾„æˆ–äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€çš„æ–‡ä»¶ï¼Œåˆ™æ–‡ä»¶å¿…é¡»ä¸º UTF-8 ç¼–ç ã€‚<br>è¯é¢‘çœç•¥æ—¶ä½¿ç”¨è‡ªåŠ¨è®¡ç®—çš„èƒ½ä¿è¯åˆ†å‡ºè¯¥è¯çš„è¯é¢‘ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<p>åˆ›æ–°åŠ 3 i<br>äº‘è®¡ç®— 5<br>å‡±ç‰¹ç³ nz<br>å°ä¸­<br>æ›´æ”¹åˆ†è¯å™¨ï¼ˆé»˜è®¤ä¸º jieba.dtï¼‰çš„ tmp_dir å’Œ cache_file å±æ€§ï¼Œå¯åˆ†åˆ«æŒ‡å®šç¼“å­˜æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹åŠå…¶æ–‡ä»¶åï¼Œç”¨äºå—é™çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<p>èŒƒä¾‹ï¼š</p>
<p>è‡ªå®šä¹‰è¯å…¸ï¼š<a href="https://github.com/fxsjy/jieba/blob/master/test/userdict.txt" target="_blank" rel="external">https://github.com/fxsjy/jieba/blob/master/test/userdict.txt</a></p>
<p>ç”¨æ³•ç¤ºä¾‹ï¼š<a href="https://github.com/fxsjy/jieba/blob/master/test/test_userdict.py" target="_blank" rel="external">https://github.com/fxsjy/jieba/blob/master/test/test_userdict.py</a></p>
<p>ä¹‹å‰ï¼š æå°ç¦ / æ˜¯ / åˆ›æ–° / åŠ / ä¸»ä»» / ä¹Ÿ / æ˜¯ / äº‘ / è®¡ç®— / æ–¹é¢ / çš„ / ä¸“å®¶ /</p>
<p>åŠ è½½è‡ªå®šä¹‰è¯åº“åï¼šã€€æå°ç¦ / æ˜¯ / åˆ›æ–°åŠ / ä¸»ä»» / ä¹Ÿ / æ˜¯ / äº‘è®¡ç®— / æ–¹é¢ / çš„ / ä¸“å®¶ /</p>
<p>è°ƒæ•´è¯å…¸</p>
<p>ä½¿ç”¨ add_word(word, freq=None, tag=None) å’Œ del_word(word) å¯åœ¨ç¨‹åºä¸­åŠ¨æ€ä¿®æ”¹è¯å…¸ã€‚<br>ä½¿ç”¨ suggest_freq(segment, tune=True) å¯è°ƒèŠ‚å•ä¸ªè¯è¯­çš„è¯é¢‘ï¼Œä½¿å…¶èƒ½ï¼ˆæˆ–ä¸èƒ½ï¼‰è¢«åˆ†å‡ºæ¥ã€‚</p>
<p>æ³¨æ„ï¼šè‡ªåŠ¨è®¡ç®—çš„è¯é¢‘åœ¨ä½¿ç”¨ HMM æ–°è¯å‘ç°åŠŸèƒ½æ—¶å¯èƒ½æ— æ•ˆã€‚</p>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<pre>
>>> print('/'.join(jieba.cut('å¦‚æœæ”¾åˆ°postä¸­å°†å‡ºé”™ã€‚', HMM=False)))
å¦‚æœ/æ”¾åˆ°/post/ä¸­å°†/å‡ºé”™/ã€‚
>>> jieba.suggest_freq(('ä¸­', 'å°†'), True)
494
>>> print('/'.join(jieba.cut('å¦‚æœæ”¾åˆ°postä¸­å°†å‡ºé”™ã€‚', HMM=False)))
å¦‚æœ/æ”¾åˆ°/post/ä¸­/å°†/å‡ºé”™/ã€‚
>>> print('/'.join(jieba.cut('ã€Œå°ä¸­ã€æ­£ç¡®åº”è¯¥ä¸ä¼šè¢«åˆ‡å¼€', HMM=False)))
ã€Œ/å°/ä¸­/ã€/æ­£ç¡®/åº”è¯¥/ä¸ä¼š/è¢«/åˆ‡å¼€
>>> jieba.suggest_freq('å°ä¸­', True)
69
>>> print('/'.join(jieba.cut('ã€Œå°ä¸­ã€æ­£ç¡®åº”è¯¥ä¸ä¼šè¢«åˆ‡å¼€', HMM=False)))
ã€Œ/å°ä¸­/ã€/æ­£ç¡®/åº”è¯¥/ä¸ä¼š/è¢«/åˆ‡å¼€
"é€šè¿‡ç”¨æˆ·è‡ªå®šä¹‰è¯å…¸æ¥å¢å¼ºæ­§ä¹‰çº é”™èƒ½åŠ›" --- https://github.com/fxsjy/jieba/issues/14
</pre>

<h3 id="å…³é”®è¯æå–"><a href="#å…³é”®è¯æå–" class="headerlink" title="å…³é”®è¯æå–"></a>å…³é”®è¯æå–</h3><p>åŸºäº TF-IDF ç®—æ³•çš„å…³é”®è¯æŠ½å–</p>
<pre>
import jieba.analyse

jieba.analyse.extract_tags(sentence, topK=20, withWeight=False, allowPOS=())</pre>

<p>sentence ä¸ºå¾…æå–çš„æ–‡æœ¬<br>topK ä¸ºè¿”å›å‡ ä¸ª TF/IDF æƒé‡æœ€å¤§çš„å…³é”®è¯ï¼Œé»˜è®¤å€¼ä¸º 20<br>withWeight ä¸ºæ˜¯å¦ä¸€å¹¶è¿”å›å…³é”®è¯æƒé‡å€¼ï¼Œé»˜è®¤å€¼ä¸º False<br>allowPOS ä»…åŒ…æ‹¬æŒ‡å®šè¯æ€§çš„è¯ï¼Œé»˜è®¤å€¼ä¸ºç©ºï¼Œå³ä¸ç­›é€‰<br>jieba.analyse.TFIDF(idf_path=None) æ–°å»º TFIDF å®ä¾‹ï¼Œidf_path ä¸º IDF é¢‘ç‡æ–‡ä»¶</p>
<p>ä»£ç ç¤ºä¾‹ ï¼ˆå…³é”®è¯æå–ï¼‰</p>
<p><a href="https://github.com/fxsjy/jieba/blob/master/test/extract_tags.py" target="_blank" rel="external">https://github.com/fxsjy/jieba/blob/master/test/extract_tags.py</a></p>
<p>å…³é”®è¯æå–æ‰€ä½¿ç”¨é€†å‘æ–‡ä»¶é¢‘ç‡ï¼ˆIDFï¼‰æ–‡æœ¬è¯­æ–™åº“å¯ä»¥åˆ‡æ¢æˆè‡ªå®šä¹‰è¯­æ–™åº“çš„è·¯å¾„</p>
<p>ç”¨æ³•ï¼š <pre>jieba.analyse.set_idf_path(file_name) # file_nameä¸ºè‡ªå®šä¹‰è¯­æ–™åº“çš„è·¯å¾„</pre></p>
<p>è‡ªå®šä¹‰è¯­æ–™åº“ç¤ºä¾‹ï¼š<a href="https://github.com/fxsjy/jieba/blob/master/extra_dict/idf.txt.big" target="_blank" rel="external">https://github.com/fxsjy/jieba/blob/master/extra_dict/idf.txt.big</a><br>ç”¨æ³•ç¤ºä¾‹ï¼š<a href="https://github.com/fxsjy/jieba/blob/master/test/extract_tags_idfpath.py" target="_blank" rel="external">https://github.com/fxsjy/jieba/blob/master/test/extract_tags_idfpath.py</a></p>
<p>å…³é”®è¯æå–æ‰€ä½¿ç”¨åœæ­¢è¯ï¼ˆStop Wordsï¼‰æ–‡æœ¬è¯­æ–™åº“å¯ä»¥åˆ‡æ¢æˆè‡ªå®šä¹‰è¯­æ–™åº“çš„è·¯å¾„</p>
<p>ç”¨æ³•ï¼š <pre>jieba.analyse.set_stop_words(file_name) # file_nameä¸ºè‡ªå®šä¹‰è¯­æ–™åº“çš„è·¯å¾„</pre></p>
<p>è‡ªå®šä¹‰è¯­æ–™åº“ç¤ºä¾‹ï¼š<a href="https://github.com/fxsjy/jieba/blob/master/extra_dict/stop_words.txt" target="_blank" rel="external">https://github.com/fxsjy/jieba/blob/master/extra_dict/stop_words.txt</a><br>ç”¨æ³•ç¤ºä¾‹ï¼š<a href="https://github.com/fxsjy/jieba/blob/master/test/extract_tags_stop_words.py" target="_blank" rel="external">https://github.com/fxsjy/jieba/blob/master/test/extract_tags_stop_words.py</a></p>
<p>å…³é”®è¯ä¸€å¹¶è¿”å›å…³é”®è¯æƒé‡å€¼ç¤ºä¾‹</p>
<p>ç”¨æ³•ç¤ºä¾‹ï¼š<a href="https://github.com/fxsjy/jieba/blob/master/test/extract_tags_with_weight.py" target="_blank" rel="external">https://github.com/fxsjy/jieba/blob/master/test/extract_tags_with_weight.py</a></p>
<p>åŸºäº TextRank ç®—æ³•çš„å…³é”®è¯æŠ½å–</p>
<pre>jieba.analyse.textrank(sentence, topK=20, withWeight=False, allowPOS=('ns', 'n', 'vn', 'v')) #ç›´æ¥ä½¿ç”¨ï¼Œæ¥å£ç›¸åŒï¼Œæ³¨æ„é»˜è®¤è¿‡æ»¤è¯æ€§ã€‚</pre>
<pre>jieba.analyse.TextRank() #æ–°å»ºè‡ªå®šä¹‰ TextRank å®ä¾‹</pre>

<p>ç®—æ³•è®ºæ–‡ï¼š TextRank: Bringing Order into Texts</p>
<p><strong>åŸºæœ¬æ€æƒ³:</strong></p>
<ul>
<li>å°†å¾…æŠ½å–å…³é”®è¯çš„æ–‡æœ¬è¿›è¡Œåˆ†è¯</li>
<li>ä»¥å›ºå®šçª—å£å¤§å°(é»˜è®¤ä¸º5ï¼Œé€šè¿‡spanå±æ€§è°ƒæ•´)ï¼Œè¯ä¹‹é—´çš„å…±ç°å…³ç³»ï¼Œæ„å»ºå›¾</li>
<li>è®¡ç®—å›¾ä¸­èŠ‚ç‚¹çš„PageRankï¼Œæ³¨æ„æ˜¯æ— å‘å¸¦æƒå›¾</li>
</ul>
<p>ä½¿ç”¨ç¤ºä¾‹:</p>
<p>è§ test/demo.py</p>
<h3 id="è¯æ€§æ ‡æ³¨"><a href="#è¯æ€§æ ‡æ³¨" class="headerlink" title="è¯æ€§æ ‡æ³¨"></a>è¯æ€§æ ‡æ³¨</h3><p>jieba.posseg.POSTokenizer(tokenizer=None) æ–°å»ºè‡ªå®šä¹‰åˆ†è¯å™¨ï¼Œtokenizer å‚æ•°å¯æŒ‡å®šå†…éƒ¨ä½¿ç”¨çš„ jieba.Tokenizer åˆ†è¯å™¨ã€‚jieba.posseg.dt ä¸ºé»˜è®¤è¯æ€§æ ‡æ³¨åˆ†è¯å™¨ã€‚<br>æ ‡æ³¨å¥å­åˆ†è¯åæ¯ä¸ªè¯çš„è¯æ€§ï¼Œé‡‡ç”¨å’Œ ictclas å…¼å®¹çš„æ ‡è®°æ³•ã€‚<br>ç”¨æ³•ç¤ºä¾‹</p>
<pre>
>>> import jieba.posseg as pseg
>>> words = pseg.cut("æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨")
>>> for word, flag in words:
...    print('%s %s' % (word, flag))
...
æˆ‘ r
çˆ± v
åŒ—äº¬ ns
å¤©å®‰é—¨ ns
</pre>

<h3 id="å¹¶è¡Œåˆ†è¯"><a href="#å¹¶è¡Œåˆ†è¯" class="headerlink" title="å¹¶è¡Œåˆ†è¯"></a>å¹¶è¡Œåˆ†è¯</h3><p>åŸç†ï¼šå°†ç›®æ ‡æ–‡æœ¬æŒ‰è¡Œåˆ†éš”åï¼ŒæŠŠå„è¡Œæ–‡æœ¬åˆ†é…åˆ°å¤šä¸ª Python è¿›ç¨‹å¹¶è¡Œåˆ†è¯ï¼Œç„¶åå½’å¹¶ç»“æœï¼Œä»è€Œè·å¾—åˆ†è¯é€Ÿåº¦çš„å¯è§‚æå‡<br>åŸºäº python è‡ªå¸¦çš„ multiprocessing æ¨¡å—ï¼Œç›®å‰æš‚ä¸æ”¯æŒ Windows<br>ç”¨æ³•ï¼š</p>
<pre>
jieba.enable_parallel(4) # å¼€å¯å¹¶è¡Œåˆ†è¯æ¨¡å¼ï¼Œå‚æ•°ä¸ºå¹¶è¡Œè¿›ç¨‹æ•°
jieba.disable_parallel() # å…³é—­å¹¶è¡Œåˆ†è¯æ¨¡å¼
</pre>

<p>ä¾‹å­ï¼š<a href="https://github.com/fxsjy/jieba/blob/master/test/parallel/test_file.py" target="_blank" rel="external">https://github.com/fxsjy/jieba/blob/master/test/parallel/test_file.py</a></p>
<p>å®éªŒç»“æœï¼šåœ¨ 4 æ ¸ 3.4GHz Linux æœºå™¨ä¸Šï¼Œå¯¹é‡‘åº¸å…¨é›†è¿›è¡Œç²¾ç¡®åˆ†è¯ï¼Œè·å¾—äº† 1MB/s çš„é€Ÿåº¦ï¼Œæ˜¯å•è¿›ç¨‹ç‰ˆçš„ 3.3 å€ã€‚</p>
<p>æ³¨æ„ï¼šå¹¶è¡Œåˆ†è¯ä»…æ”¯æŒé»˜è®¤åˆ†è¯å™¨ jieba.dt å’Œ jieba.posseg.dtã€‚</p>
<h3 id="Tokenizeï¼šè¿”å›è¯è¯­åœ¨åŸæ–‡çš„èµ·æ­¢ä½ç½®"><a href="#Tokenizeï¼šè¿”å›è¯è¯­åœ¨åŸæ–‡çš„èµ·æ­¢ä½ç½®" class="headerlink" title="Tokenizeï¼šè¿”å›è¯è¯­åœ¨åŸæ–‡çš„èµ·æ­¢ä½ç½®"></a>Tokenizeï¼šè¿”å›è¯è¯­åœ¨åŸæ–‡çš„èµ·æ­¢ä½ç½®</h3><p>æ³¨æ„ï¼Œè¾“å…¥å‚æ•°åªæ¥å— unicode</p>
<pre>
# é»˜è®¤æ¨¡å¼
result = jieba.tokenize(u'æ°¸å’Œæœè£…é¥°å“æœ‰é™å…¬å¸')
for tk in result:
    print("word %s\t\t start: %d \t\t end:%d" % (tk[0],tk[1],tk[2]))
word æ°¸å’Œ                start: 0                end:2
word æœè£…                start: 2                end:4
word é¥°å“                start: 4                end:6
word æœ‰é™å…¬å¸            start: 6                end:10

# æœç´¢æ¨¡å¼
result = jieba.tokenize(u'æ°¸å’Œæœè£…é¥°å“æœ‰é™å…¬å¸', mode='search')
for tk in result:
    print("word %s\t\t start: %d \t\t end:%d" % (tk[0],tk[1],tk[2]))
word æ°¸å’Œ                start: 0                end:2
word æœè£…                start: 2                end:4
word é¥°å“                start: 4                end:6
word æœ‰é™                start: 6                end:8
word å…¬å¸                start: 8                end:10
word æœ‰é™å…¬å¸            start: 6                end:10
</pre>


<h3 id="ChineseAnalyzer-for-Whoosh-æœç´¢å¼•æ“"><a href="#ChineseAnalyzer-for-Whoosh-æœç´¢å¼•æ“" class="headerlink" title="ChineseAnalyzer for Whoosh æœç´¢å¼•æ“"></a>ChineseAnalyzer for Whoosh æœç´¢å¼•æ“</h3><p>å¼•ç”¨ï¼š from jieba.analyse import ChineseAnalyzer<br>ç”¨æ³•ç¤ºä¾‹ï¼š<a href="https://github.com/fxsjy/jieba/blob/master/test/test_whoosh.py" target="_blank" rel="external">https://github.com/fxsjy/jieba/blob/master/test/test_whoosh.py</a></p>
<h3 id="å‘½ä»¤è¡Œåˆ†è¯"><a href="#å‘½ä»¤è¡Œåˆ†è¯" class="headerlink" title="å‘½ä»¤è¡Œåˆ†è¯"></a>å‘½ä»¤è¡Œåˆ†è¯</h3><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre>python -m jieba news.txt > cut_result.txt</pre>

<p>å‘½ä»¤è¡Œé€‰é¡¹ï¼ˆç¿»è¯‘ï¼‰ï¼š</p>
<p>ä½¿ç”¨:</p>
<pre>python -m jieba [options] filename</pre>

<p>å¦‚æœæ²¡æœ‰æŒ‡å®šæ–‡ä»¶åï¼Œåˆ™ä½¿ç”¨æ ‡å‡†è¾“å…¥ã€‚<br>â€“help é€‰é¡¹è¾“å‡ºï¼š</p>
<pre>
$> python -m jieba --help
Jieba command line interface.

positional arguments:
  filename              input file

optional arguments:
  -h, --help            show this help message and exit
  -d [DELIM], --delimiter [DELIM]
                        use DELIM instead of ' / ' for word delimiter; or a
                        space if it is used without DELIM
  -p [DELIM], --pos [DELIM]
                        enable POS tagging; if DELIM is specified, use DELIM
                        instead of '\_' for POS delimiter
  -D DICT, --dict DICT  use DICT as dictionary
  -u USER_DICT, --user-dict USER_DICT
                        use USER_DICT together with the default dictionary or
                        DICT (if specified)
  -a, --cut-all         full pattern cutting (ignored with POS tagging)
  -n, --no-hmm          don't use the Hidden Markov Model
  -q, --quiet           don't print loading messages to stderr
  -V, --version         show program's version number and exit
</pre>

<p>If no filename specified, use STDIN instead.</p>
<h3 id="å»¶è¿ŸåŠ è½½æœºåˆ¶"><a href="#å»¶è¿ŸåŠ è½½æœºåˆ¶" class="headerlink" title="å»¶è¿ŸåŠ è½½æœºåˆ¶"></a>å»¶è¿ŸåŠ è½½æœºåˆ¶</h3><p>jieba é‡‡ç”¨å»¶è¿ŸåŠ è½½ï¼Œimport jieba å’Œ jieba.Tokenizer() ä¸ä¼šç«‹å³è§¦å‘è¯å…¸çš„åŠ è½½ï¼Œä¸€æ—¦æœ‰å¿…è¦æ‰å¼€å§‹åŠ è½½è¯å…¸æ„å»ºå‰ç¼€å­—å…¸ã€‚å¦‚æœä½ æƒ³æ‰‹å·¥åˆå§‹ jiebaï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆå§‹åŒ–ã€‚</p>
<p>import jieba<br>jieba.initialize()  # æ‰‹åŠ¨åˆå§‹åŒ–ï¼ˆå¯é€‰ï¼‰<br>åœ¨ 0.28 ä¹‹å‰çš„ç‰ˆæœ¬æ˜¯ä¸èƒ½æŒ‡å®šä¸»è¯å…¸çš„è·¯å¾„çš„ï¼Œæœ‰äº†å»¶è¿ŸåŠ è½½æœºåˆ¶åï¼Œä½ å¯ä»¥æ”¹å˜ä¸»è¯å…¸çš„è·¯å¾„:</p>
<p>jieba.set_dictionary(â€˜data/dict.txt.bigâ€™)<br>ä¾‹å­ï¼š <a href="https://github.com/fxsjy/jieba/blob/master/test/test_change_dictpath.py" target="_blank" rel="external">https://github.com/fxsjy/jieba/blob/master/test/test_change_dictpath.py</a></p>
<h3 id="å…¶ä»–è¯å…¸"><a href="#å…¶ä»–è¯å…¸" class="headerlink" title="å…¶ä»–è¯å…¸"></a>å…¶ä»–è¯å…¸</h3><p>å ç”¨å†…å­˜è¾ƒå°çš„è¯å…¸æ–‡ä»¶ <a href="https://github.com/fxsjy/jieba/raw/master/extra_dict/dict.txt.small" target="_blank" rel="external">https://github.com/fxsjy/jieba/raw/master/extra_dict/dict.txt.small</a></p>
<p>æ”¯æŒç¹ä½“åˆ†è¯æ›´å¥½çš„è¯å…¸æ–‡ä»¶ <a href="https://github.com/fxsjy/jieba/raw/master/extra_dict/dict.txt.big" target="_blank" rel="external">https://github.com/fxsjy/jieba/raw/master/extra_dict/dict.txt.big</a></p>
<p>ä¸‹è½½ä½ æ‰€éœ€è¦çš„è¯å…¸ï¼Œç„¶åè¦†ç›– jieba/dict.txt å³å¯ï¼›æˆ–è€…ç”¨ jieba.set_dictionary(â€˜data/dict.txt.bigâ€™)</p>
<h3 id="å…¶ä»–è¯­è¨€å®ç°"><a href="#å…¶ä»–è¯­è¨€å®ç°" class="headerlink" title="å…¶ä»–è¯­è¨€å®ç°"></a>å…¶ä»–è¯­è¨€å®ç°</h3><p>ç»“å·´åˆ†è¯ Java ç‰ˆæœ¬</p>
<p>ä½œè€…ï¼špiaolingxue åœ°å€ï¼š<a href="https://github.com/huaban/jieba-analysis" target="_blank" rel="external">https://github.com/huaban/jieba-analysis</a></p>
<p>ç»“å·´åˆ†è¯ C++ ç‰ˆæœ¬</p>
<p>ä½œè€…ï¼šyanyiwu åœ°å€ï¼š<a href="https://github.com/yanyiwu/cppjieba" target="_blank" rel="external">https://github.com/yanyiwu/cppjieba</a></p>
<p>ç»“å·´åˆ†è¯ Node.js ç‰ˆæœ¬</p>
<p>ä½œè€…ï¼šyanyiwu åœ°å€ï¼š<a href="https://github.com/yanyiwu/nodejieba" target="_blank" rel="external">https://github.com/yanyiwu/nodejieba</a></p>
<p>ç»“å·´åˆ†è¯ Erlang ç‰ˆæœ¬</p>
<p>ä½œè€…ï¼šfalood åœ°å€ï¼š<a href="https://github.com/falood/exjieba" target="_blank" rel="external">https://github.com/falood/exjieba</a></p>
<p>ç»“å·´åˆ†è¯ R ç‰ˆæœ¬</p>
<p>ä½œè€…ï¼šqinwf åœ°å€ï¼š<a href="https://github.com/qinwf/jiebaR" target="_blank" rel="external">https://github.com/qinwf/jiebaR</a></p>
<p>ç»“å·´åˆ†è¯ iOS ç‰ˆæœ¬</p>
<p>ä½œè€…ï¼šyanyiwu åœ°å€ï¼š<a href="https://github.com/yanyiwu/iosjieba" target="_blank" rel="external">https://github.com/yanyiwu/iosjieba</a></p>
<p>ç»“å·´åˆ†è¯ PHP ç‰ˆæœ¬</p>
<p>ä½œè€…ï¼šfukuball åœ°å€ï¼š<a href="https://github.com/fukuball/jieba-php" target="_blank" rel="external">https://github.com/fukuball/jieba-php</a></p>
<p>ç»“å·´åˆ†è¯ .NET(C#) ç‰ˆæœ¬</p>
<p>ä½œè€…ï¼šanderscui åœ°å€ï¼š<a href="https://github.com/anderscui/jieba.NET/" target="_blank" rel="external">https://github.com/anderscui/jieba.NET/</a></p>
<p>ç³»ç»Ÿé›†æˆ</p>
<p>Solr: <a href="https://github.com/sing1ee/jieba-solr" target="_blank" rel="external">https://github.com/sing1ee/jieba-solr</a><br>åˆ†è¯é€Ÿåº¦</p>
<p>1.5 MB / Second in Full Mode<br>400 KB / Second in Default Mode<br>æµ‹è¯•ç¯å¢ƒ: Intel(R) Core(TM) i7-2600 CPU @ 3.4GHzï¼›ã€Šå›´åŸã€‹.txt</p>
<h1 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h1><ul>
<li>æ¨¡å‹çš„æ•°æ®æ˜¯å¦‚ä½•ç”Ÿæˆçš„ï¼Ÿ</li>
</ul>
<p>è¯¦è§ï¼š <a href="https://github.com/fxsjy/jieba/issues/7" target="_blank" rel="external">https://github.com/fxsjy/jieba/issues/7</a></p>
<ul>
<li>â€œå°ä¸­â€æ€»æ˜¯è¢«åˆ‡æˆâ€œå° ä¸­â€ï¼Ÿï¼ˆä»¥åŠç±»ä¼¼æƒ…å†µï¼‰</li>
</ul>
<p>P(å°ä¸­) ï¼œ P(å°)Ã—P(ä¸­)ï¼Œâ€œå°ä¸­â€è¯é¢‘ä¸å¤Ÿå¯¼è‡´å…¶æˆè¯æ¦‚ç‡è¾ƒä½</p>
<p>è§£å†³æ–¹æ³•ï¼šå¼ºåˆ¶è°ƒé«˜è¯é¢‘</p>
<p>jieba.add_word(â€˜å°ä¸­â€™) æˆ–è€… jieba.suggest_freq(â€˜å°ä¸­â€™, True)</p>
<ul>
<li>â€œä»Šå¤©å¤©æ°” ä¸é”™â€åº”è¯¥è¢«åˆ‡æˆâ€œä»Šå¤© å¤©æ°” ä¸é”™â€ï¼Ÿï¼ˆä»¥åŠç±»ä¼¼æƒ…å†µï¼‰</li>
</ul>
<p>è§£å†³æ–¹æ³•ï¼šå¼ºåˆ¶è°ƒä½è¯é¢‘</p>
<p>jieba.suggest_freq((â€˜ä»Šå¤©â€™, â€˜å¤©æ°”â€™), True)</p>
<p>æˆ–è€…ç›´æ¥åˆ é™¤è¯¥è¯ jieba.del_word(â€˜ä»Šå¤©å¤©æ°”â€™)</p>
<ul>
<li>åˆ‡å‡ºäº†è¯å…¸ä¸­æ²¡æœ‰çš„è¯è¯­ï¼Œæ•ˆæœä¸ç†æƒ³ï¼Ÿ</li>
</ul>
<p>è§£å†³æ–¹æ³•ï¼šå…³é—­æ–°è¯å‘ç°</p>
<p>jieba.cut(â€˜ä¸°ç”°å¤ªçœäº†â€™, HMM=False) jieba.cut(â€˜æˆ‘ä»¬ä¸­å‡ºäº†ä¸€ä¸ªå›å¾’â€™, HMM=False)</p>
<p>æ›´å¤šé—®é¢˜è¯·ç‚¹å‡»ï¼š<a href="https://github.com/fxsjy/jieba/issues?sort=updated&amp;state=closed" target="_blank" rel="external">https://github.com/fxsjy/jieba/issues?sort=updated&amp;state=closed</a></p>
<p>ä¿®è®¢å†å²</p>
<p><a href="https://github.com/fxsjy/jieba/blob/master/Changelog" target="_blank" rel="external">https://github.com/fxsjy/jieba/blob/master/Changelog</a></p>
<blockquote>
<p><a href="https://github.com/fxsjy/jieba" target="_blank" rel="external">https://github.com/fxsjy/jieba</a></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ä¸­æ–‡åˆ†è¯/">ä¸­æ–‡åˆ†è¯</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Gensim-ç”¨Pythonåšä¸»é¢˜æ¨¡å‹" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/18/Gensim-ç”¨Pythonåšä¸»é¢˜æ¨¡å‹/" class="article-date">
  	<time datetime="2016-05-18T02:22:31.000Z" itemprop="datePublished">2016-05-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/18/Gensim-ç”¨Pythonåšä¸»é¢˜æ¨¡å‹/">Gensim-ç”¨Pythonåšä¸»é¢˜æ¨¡å‹</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>gemsimæ˜¯ä¸€ä¸ªå…è´¹pythonåº“ï¼Œèƒ½å¤Ÿä»æ–‡æ¡£ä¸­æœ‰æ•ˆåœ°è‡ªåŠ¨æŠ½å–è¯­ä¹‰ä¸»é¢˜ã€‚gensimä¸­çš„ç®—æ³•åŒ…æ‹¬ï¼šLSA(Latent Semantic Analysis), LDA(Latent Dirichlet Allocation), RP (Random Projections), é€šè¿‡åœ¨ä¸€ä¸ªè®­ç»ƒæ–‡æ¡£è¯­æ–™åº“ä¸­ï¼Œæ£€æŸ¥è¯æ±‡ç»Ÿè®¡è”åˆå‡ºç°æ¨¡å¼, å¯ä»¥ç”¨æ¥å‘æ˜æ–‡æ¡£è¯­ä¹‰ç»“æ„ï¼Œè¿™äº›ç®—æ³•å±äºéç›‘ç£å­¦ä¹ ï¼Œå¯ä»¥å¤„ç†åŸå§‹çš„ï¼Œéç»“æ„åŒ–çš„æ–‡æœ¬ï¼ˆâ€plain textâ€ï¼‰ã€‚</p>
<h3 id="gensimæœ‰ç€å¦‚ä¸‹ç‰¹æ€§"><a href="#gensimæœ‰ç€å¦‚ä¸‹ç‰¹æ€§" class="headerlink" title="gensimæœ‰ç€å¦‚ä¸‹ç‰¹æ€§"></a>gensimæœ‰ç€å¦‚ä¸‹ç‰¹æ€§</h3><ul>
<li>å†…å­˜ç‹¬ç«‹- å¯¹äºè®­ç»ƒè¯­æ–™æ¥è¯´ï¼Œæ²¡å¿…è¦åœ¨ä»»ä½•æ—¶é—´å°†æ•´ä¸ªè¯­æ–™éƒ½é©»ç•™åœ¨RAMä¸­</li>
<li>æœ‰æ•ˆå®ç°äº†è®¸å¤šæµè¡Œçš„å‘é‡ç©ºé—´ç®—æ³•ï¼åŒ…æ‹¬tf-idfï¼Œåˆ†å¸ƒå¼LSA, åˆ†å¸ƒå¼LDA ä»¥åŠ RPï¼›å¹¶ä¸”å¾ˆå®¹æ˜“æ·»åŠ æ–°ç®—æ³•</li>
<li>å¯¹æµè¡Œçš„æ•°æ®æ ¼å¼è¿›è¡Œäº†IOå°è£…å’Œè½¬æ¢</li>
<li>åœ¨å…¶è¯­ä¹‰è¡¨è¾¾ä¸­ï¼Œå¯ä»¥ç›¸ä¼¼æŸ¥è¯¢</li>
<li>gensimçš„åˆ›å»ºçš„ç›®çš„æ˜¯ï¼Œç”±äºç¼ºä¹ç®€å•çš„ï¼ˆjavaå¾ˆå¤æ‚ï¼‰å®ç°ä¸»é¢˜å»ºæ¨¡çš„å¯æ‰©å±•è½¯ä»¶æ¡†æ¶.</li>
</ul>
<h3 id="gensimçš„è®¾è®¡åŸåˆ™"><a href="#gensimçš„è®¾è®¡åŸåˆ™" class="headerlink" title="gensimçš„è®¾è®¡åŸåˆ™"></a>gensimçš„è®¾è®¡åŸåˆ™</h3><ul>
<li>ç®€å•çš„æ¥å£ï¼Œå­¦ä¹ æ›²çº¿ä½ã€‚å¯¹äºåŸå‹å®ç°å¾ˆæ–¹ä¾¿</li>
<li>æ ¹æ®è¾“å…¥çš„è¯­æ–™çš„sizeæ¥è¯´ï¼Œå†…å­˜å„è‡ªç‹¬ç«‹ï¼›åŸºäºæµçš„ç®—æ³•æ“ä½œï¼Œä¸€æ¬¡è®¿é—®ä¸€ä¸ªæ–‡æ¡£.</li>
</ul>
<h3 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a>æ ¸å¿ƒæ¦‚å¿µ</h3><p>gensimçš„æ•´ä¸ªpackageä¼šæ¶‰åŠä¸‰ä¸ªæ¦‚å¿µï¼šcorpus, vector, model.</p>
<ul>
<li>è¯­åº“(corpus)<br>æ–‡æ¡£é›†åˆï¼Œç”¨äºè‡ªåŠ¨æ¨å‡ºæ–‡æ¡£ç»“æ„ï¼Œä»¥åŠå®ƒä»¬çš„ä¸»é¢˜ç­‰ï¼Œä¹Ÿå¯ç§°ä½œè®­ç»ƒè¯­æ–™ã€‚</li>
</ul>
<ul>
<li><p>å‘é‡(vector)</p>
<p>åœ¨å‘é‡ç©ºé—´æ¨¡å‹(VSM)ä¸­ï¼Œæ¯ä¸ªæ–‡æ¡£è¢«è¡¨ç¤ºæˆä¸€ä¸ªç‰¹å¾æ•°ç»„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå•ä¸€ç‰¹å¾å¯ä»¥è¢«è¡¨ç¤ºæˆä¸€ä¸ªé—®ç­”å¯¹(question-answer pair):</p>
<p>[1].åœ¨æ–‡æ¡£ä¸­å•è¯â€splongeâ€å‡ºç°çš„æ¬¡æ•°ï¼Ÿ 0ä¸ª<br>[2].æ–‡æ¡£ä¸­åŒ…å«äº†å¤šå°‘å¥å­ï¼Ÿ 2ä¸ª<br>[3].æ–‡æ¡£ä¸­ä½¿ç”¨äº†å¤šå°‘å­—ä½“? 5ç§<br>è¿™é‡Œçš„é—®é¢˜å¯ä»¥è¡¨ç¤ºæˆæ•´å‹id (æ¯”å¦‚ï¼š1,2,3ç­‰), å› æ­¤ï¼Œä¸Šé¢çš„æ–‡æ¡£å¯ä»¥è¡¨ç¤ºæˆï¼š(1, 0.0), (2, 2.0), (3, 5.0). å¦‚æœæˆ‘ä»¬äº‹å…ˆçŸ¥é“æ‰€æœ‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾å¼åœ°å†™æˆè¿™æ ·ï¼š(0.0, 2.0, 5.0). è¿™ä¸ªansweråºåˆ—å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªå¤šç»´çŸ©é˜µï¼ˆ3ç»´ï¼‰. å¯¹äºå®é™…ç›®çš„ï¼Œåªæœ‰questionå¯¹åº”çš„answeræ˜¯ä¸€ä¸ªå®æ•°.</p>
<p>å¯¹äºæ¯ä¸ªæ–‡æ¡£æ¥è¯´ï¼Œansweræ˜¯ç±»ä¼¼çš„. å› è€Œï¼Œå¯¹äºä¸¤ä¸ªå‘é‡æ¥è¯´ï¼ˆåˆ†åˆ«è¡¨ç¤ºä¸¤ä¸ªæ–‡æ¡£ï¼‰ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥ä¸‹ç±»ä¼¼çš„ç»“è®ºï¼šâ€œå¦‚æœä¸¤ä¸ªå‘é‡ä¸­çš„å®æ•°æ˜¯ç›¸ä¼¼çš„ï¼Œé‚£ä¹ˆï¼ŒåŸå§‹çš„æ–‡æ¡£ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯ç›¸ä¼¼çš„â€ã€‚å½“ç„¶ï¼Œè¿™æ ·çš„ç»“è®ºä¾èµ–äºæˆ‘ä»¬å¦‚ä½•å»é€‰å–æˆ‘ä»¬çš„questionã€‚</p>
</li>
</ul>
<ul>
<li><p>ç¨€ç–çŸ©é˜µ(Sparse vector)</p>
<p>é€šå¸¸ï¼Œå¤§å¤šæ•°answerçš„å€¼éƒ½æ˜¯0.0. ä¸ºäº†èŠ‚çœç©ºé—´ï¼Œæˆ‘ä»¬éœ€è¦ä»æ–‡æ¡£è¡¨ç¤ºä¸­å¿½ç•¥å®ƒä»¬ï¼Œåªéœ€è¦å†™ï¼š(2, 2.0), (3, 5.0) å³å¯(æ³¨æ„ï¼šè¿™é‡Œå¿½ç•¥äº†(1, 0.0)). ç”±äºæ‰€æœ‰çš„é—®é¢˜é›†äº‹å…ˆéƒ½çŸ¥é“ï¼Œé‚£ä¹ˆåœ¨ç¨€ç–çŸ©é˜µçš„æ–‡æ¡£è¡¨ç¤ºä¸­æ‰€æœ‰ç¼ºå¤±çš„ç‰¹æ€§å¯ä»¥è®¤ä¸ºéƒ½æ˜¯0.0.</p>
<p>gensimçš„ç‰¹åˆ«ä¹‹å¤„åœ¨äºï¼Œå®ƒæ²¡æœ‰é™å®šä»»ä½•ç‰¹å®šçš„è¯­æ–™æ ¼å¼ï¼›è¯­æ–™å¯ä»¥æ˜¯ä»»ä½•æ ¼å¼ï¼Œå½“è¿­ä»£æ—¶ï¼Œé€šè¿‡ç¨€ç–çŸ©é˜µæ¥å®Œæˆå³å¯ã€‚ä¾‹å¦‚ï¼Œé›†åˆ ([(2, 2.0), (3, 5.0)], ([0, -1.0], [3, -1.0])) æ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªæ–‡æ¡£çš„è¯­æ–™ï¼Œæ¯ä¸ªéƒ½æœ‰ä¸¤ä¸ªéé›¶çš„ pairã€‚</p>
</li>
</ul>
<ul>
<li><p>æ¨¡å‹(model)</p>
<p>å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œä¸€ä¸ªæ¨¡å‹å°±æ˜¯ä¸€ä¸ªå˜æ¢(transformation)ï¼Œå°†ä¸€ç§æ–‡æ¡£è¡¨ç¤ºè½¬æ¢æˆå¦ä¸€ç§ã€‚åˆå§‹å’Œç›®æ ‡è¡¨ç¤ºéƒ½æ˜¯å‘é‡ï¼ï¼å®ƒä»¬åªåœ¨questionå’Œanswerä¹‹é—´æœ‰åŒºåˆ«ã€‚è¿™ä¸ªå˜æ¢å¯ä»¥é€šè¿‡è®­ç»ƒçš„è¯­æ–™è¿›è¡Œè‡ªåŠ¨å­¦ä¹ ï¼Œæ— éœ€äººå·¥ç›‘ç£ï¼Œæœ€ç»ˆçš„æ–‡æ¡£è¡¨ç¤ºå°†æ›´åŠ ç´§å‡‘å’Œæœ‰ç”¨ï¼›ç›¸ä¼¼çš„æ–‡æ¡£å…·æœ‰ç›¸ä¼¼çš„è¡¨ç¤ºã€‚</p>
</li>
</ul>
<h3 id="æ¼”ç¤ºä»£ç è§-http-shuang0420-github-io-2016-05-18-Gensim-and-LDA-Training-and-Prediction"><a href="#æ¼”ç¤ºä»£ç è§-http-shuang0420-github-io-2016-05-18-Gensim-and-LDA-Training-and-Prediction" class="headerlink" title="æ¼”ç¤ºä»£ç è§ http://shuang0420.github.io/2016/05/18/Gensim-and-LDA-Training-and-Prediction/"></a>æ¼”ç¤ºä»£ç è§ <a href="http://shuang0420.github.io/2016/05/18/Gensim-and-LDA-Training-and-Prediction/" target="_blank" rel="external">http://shuang0420.github.io/2016/05/18/Gensim-and-LDA-Training-and-Prediction/</a></h3><blockquote>
<p>å‚è€ƒé“¾æ¥<br><a href="http://d0evi1.github.io/gensim/" target="_blank" rel="external">http://d0evi1.github.io/gensim/</a></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LDA/">LDA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cluster/">cluster</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gensim/">gensim</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/machine-learning/">machine learning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/topic-modeling/">topic modeling</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/machine-learning/">machine learning</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-pythonå¿«æ·é€šé“" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/18/pythonå¿«æ·é€šé“/" class="article-date">
  	<time datetime="2016-05-18T01:42:48.000Z" itemprop="datePublished">2016-05-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/18/pythonå¿«æ·é€šé“/">pythonå¿«æ·é€šé“ -- MYSQL</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="è¿æ¥-mysql"><a href="#è¿æ¥-mysql" class="headerlink" title="è¿æ¥ mysql"></a>è¿æ¥ mysql</h3><pre>
import MySQLdb
conn= MySQLdb.connect(
        host='127.0.0.1',
        port = 3306,
        user='root',
        passwd='',
        db ='FAQsys',
        charset='utf8',
        )
cur = conn.cursor()
cur.execute("USE yibotDB")</pre>

<h3 id="æŸ¥è¯¢æ•°æ®"><a href="#æŸ¥è¯¢æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ•°æ®"></a>æŸ¥è¯¢æ•°æ®</h3><pre>
try:
    cur.execute("SELECT Question FROM Questions")
    results=cur.fetchall()
    # result = cur.fetchone()
    # result = cur.fetchmany()
    for row in results:
        question = row[0]
        # print question
except:
   # Rollback in case there is any error
   conn.rollback()
</pre>

<h3 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h3><p><strong>å¦‚æœæ˜¯æ’å…¥æ•°æ®ï¼Œè¦æ‰§è¡Œcommitæ“ä½œï¼Œä¸ç„¶æ•°æ®ä¸ä¼šè¢«å†™å…¥æ•°æ®åº“ã€‚æœ€å¥½æ˜¯æ‰§è¡Œå®Œæ‰€æœ‰çš„sqlè¯­å¥ä¹‹åå†commitï¼Œå®è·µè¯æ˜ï¼Œè¿™æ ·ä¼šå¸¦æ¥å¾ˆå¤§çš„é€Ÿåº¦æå‡ã€‚</strong></p>
<pre>
def insertIntoOriginalQuestion():
    f = open('newfileWithIndex.txt', 'r')
    for line in f:
        try:
            cur.execute("INSERT IGNORE INTO `yibotDB`.`originalQuestion` (`originalQuestion`) VALUES ('" + line + "')")
        except:
           # Rollback in case there is any error
           conn.rollback()
    conn.commit()</pre>


<h3 id="ä¹±ç ï¼Ÿ"><a href="#ä¹±ç ï¼Ÿ" class="headerlink" title="ä¹±ç ï¼Ÿ"></a>ä¹±ç ï¼Ÿ</h3><p>åœ¨è¿æ¥æ•°æ®åº“æ—¶è®¾ç½®äº†charset=â€™utf8â€™,æ•°æ®åº“é‡Œè¡¨çš„ç¼–ç ä¹Ÿæ˜¯â€™utf8â€™ï¼Œç„¶è€Œåœ¨mysqlæŸ¥çœ‹æ•°æ®æ—¶è¿˜æ˜¯ä¼šä¹±ç ï¼Œæ€ä¹ˆåŠï¼Ÿï¼ä¹‹å‰ä»¥ä¸ºæ˜¯pythonçš„é—®é¢˜ï¼Œæ‰¾äº†å¾ˆä¹…bugæ‰å‘ç°å…¶å®æ˜¯mysqlçš„é—®é¢˜ï¼åœ¨sqlé‡ŒæŸ¥è¯¢æ•°æ®çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„ï¼ï¼ï¼</p>
<pre>
    mysql> select * from 15_04_14_node_rtt;
    +--------+------+---------+------+--------+
    | node   | rtt  | rtt_avg | vist | user   |
    +--------+------+---------+------+--------+
    | ?????? | ?    | ???     | ???? | ?????? |
    +--------+------+---------+------+--------+
    1 row in set (0.00 sec)

    mysql> set names utf8;     #åŸå› ç”±äºç»ˆç«¯å’Œå®¢æˆ·ç«¯æ‰€ç”¨ç»˜ç”»ä¸ä¸€æ ·
    Query OK, 0 rows affected (0.00 sec)</pre>

<blockquote>
<p>å‚è€ƒé“¾æ¥<br><a href="http://www.runoob.com/python/python-mysql.html" target="_blank" rel="external">http://www.runoob.com/python/python-mysql.html</a></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/å¿«æ·é€šé“/">å¿«æ·é€šé“</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JGibbLDAå®æˆ˜" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/16/JGibbLDAå®æˆ˜/" class="article-date">
  	<time datetime="2016-05-16T12:50:23.000Z" itemprop="datePublished">2016-05-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/16/JGibbLDAå®æˆ˜/">JGibbLDAå®æˆ˜</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>å°è¯•äº†ä¸‹JGibbLDAï¼Œå‘ç°æŒ‰å®˜æ–¹æ•™ç¨‹ç”¨ä»¥ä¸‹å‘½ä»¤ç›´æ¥è¿è¡ŒjaråŒ…ä¼šå‡ºç°é”™è¯¯ã€‚<br>å‘½ä»¤ï¼š</p>
<pre>java -mx512M -cp bin:lib/args4j-2.0.6.jar jgibblda.LDA -est -alpha 0.5 -beta 0.1 -ntopics 100 -niters 1000 -savestep 100 -twords 20 -dfile models/casestudy/newdocs.dat</pre>

<p>é”™è¯¯ä¿¡æ¯ï¼š</p>
<p><img src="http://7xu83c.com1.z0.glb.clouddn.com/err.png" alt=""></p>
<p>äºæ˜¯å°è¯•å¯¼å…¥eclipseè¿è¡Œæ‰‹åŠ¨é…ç½®ï¼ŒæˆåŠŸï¼Œè¿‡ç¨‹å¦‚ä¸‹ã€‚</p>
<ol>
<li><p>ä¸‹è½½JGibbLDAçš„jaråŒ…å¹¶è§£å‹ï¼›<br>ç½‘å€ï¼š<a href="http://jgibblda.sourceforge.net/#Griffiths04" target="_blank" rel="external">http://jgibblda.sourceforge.net/#Griffiths04</a></p>
</li>
<li><p>å¯¼å…¥eclipseï¼Œç¡®ä¿jaråŒ…åœ¨ç›®å½•ä¸­</p>
</li>
<li><p>æ‰¾åˆ°LDACmdOption.javaæ–‡ä»¶ï¼Œ ä¿®æ”¹éƒ¨åˆ†ä»£ç </p>
<pre> @Option(name="-dir", usage="Specify directory")
 public String dir = "models/casestudy-en";

 @Option(name="-dfile", usage="Specify data file")
 public String dfile = "models/casestudy-en/newdocs.dat";</pre>

<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œdfileçš„æ ¼å¼å¿…é¡»æ˜¯ğŸ‘‡è¿™ä¸ªæ ·å­ï¼š</p>
<pre>[M]
[document1]
[document2]
...
[documentM]</pre>

<p>ç¬¬ä¸€è¡Œ[M]æ˜¯documentsçš„æ€»æ•°ï¼Œä¹‹åçš„æ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªdocumentï¼Œæ¯ä¸ªdocumentæ˜¯ä¸€ä¸ªword listï¼Œæˆ–è€…è¯´æ˜¯bag of wordsã€‚</p>
<pre>[document i] = [word i1] [word i2] ... [word iNi]</pre>

<p>å„å‚æ•°å«ä¹‰ï¼š<br><strong>-est </strong>ä»è®­ç»ƒè¯­æ–™ä¸­è¯„ä¼°å‡ºLDAæ¨¡å‹<br><strong>-alpha</strong> LDAæ¨¡å‹ä¸­çš„alphaæ•°å€¼ï¼Œé»˜è®¤ä¸º50/K(Kæ˜¯ä¸»é¢˜æ•°ç›®)<br><strong>-beta</strong> LDAæ¨¡å‹ä¸­çš„betaæ•°å€¼ï¼Œé»˜è®¤æ˜¯0.1<br><strong>-ntopics</strong> ä¸»é¢˜æ•°ç›®ï¼Œé»˜è®¤å€¼æ˜¯100<br><strong>-niters</strong> GIbbsé‡‡æ ·çš„è¿­ä»£æ•°ç›®ï¼Œé»˜è®¤å€¼ä¸º2000<br><strong>-savestep</strong> æŒ‡å®šå¼€å§‹ä¿å­˜LDAæ¨¡å‹çš„è¿­ä»£æ¬¡æ•°<br><strong>-dir</strong> è®­ç»ƒè¯­æ–™ç›®å½•<br><strong>-dfile</strong> è®­ç»ƒè¯­æ–™æ–‡ä»¶åç§°</p>
</li>
<li><p>ä¿®æ”¹é¡¹ç›®çš„Run Configurationsï¼Œåœ¨Java Applicationä¸­é€‰æ‹©LDAï¼Œç‚¹å‡»(x)=Argumentsï¼Œè¾“å…¥</p>
<pre>-est -alpha 0.2 -beta 0.1 -ntopics 100 -niters 1000 -savestep 100 -twords 100 -dir  Users\x\MyEclipse1\JGibbLDA-v.1.0\models\casestudy-en -dfile "newdocs.dat"</pre>

<p> è‹¥åˆ©ç”¨å·²è®­ç»ƒçš„LDAæ¨¡å‹é¢„æµ‹ï¼Œè¾“å…¥ä»¥ä¸‹å‚æ•°ï¼š</p>
<pre>-inf -dir  Users\x\MyEclipse1\JGibbLDA-v.1.0\models\casestudy-en -dfile "test.txt"</pre>

<p> æ³¨æ„ï¼Œè¿›è¡Œé¢„æµ‹æ—¶ï¼Œå½“å‰ç›®å½•ä¸‹å¿…é¡»åŒ…å«å·²æœ‰çš„LDAè®­ç»ƒè¾“å‡ºæ–‡ä»¶ï¼ŒåŒ…æ‹¬model-final.othersã€model-final.phiã€model-final.tassignã€model-final.thetaã€model-final.twordsã€wordmap.txtæ–‡ä»¶ï¼Œå¦‚æœè¿è¡ŒæŠ¥é”™ï¼Œå°è¯•ä¿®æ”¹LDACmdOption.javaçš„modelNameï¼Œç¡®ä¿å’Œæ–‡ä»¶åçš„modelnameéƒ¨åˆ†ä¸€è‡´ã€‚<br><pre>@Option(name=â€-modelâ€, usage=â€Specify the model nameâ€)<br> public String modelName = â€œmodel-finalâ€;</pre>   </p>
<p> å¦‚æœå‡ºç°java heap limitedçš„é—®é¢˜ï¼Œåœ¨VM argumentsä¸‹æ·»åŠ </p>
<pre>-Xms1g -Xmx1g -Xmn512m</pre>
</li>
<li><p>Run<br>è¾“å‡ºæ–‡ä»¶ä¸»è¦æœ‰ï¼š<br><strong><model_name>.others</model_name></strong>  æ–‡ä»¶å­˜å‚¨LDAæ¨¡å‹å‚æ•°ï¼Œå¦‚alphaã€betaç­‰ã€‚<br><strong><model_name>.phi </model_name></strong> æ¯ä¸ªtopicå†…å¯¹docçš„åˆ†å¸ƒæƒ…å†µã€‚æ–‡ä»¶å­˜å‚¨è¯è¯­-ä¸»é¢˜åˆ†å¸ƒï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªä¸»é¢˜ï¼Œåˆ—å†…å®¹ä¸ºè¯è¯­ã€‚<br><strong><model_name>.theta </model_name></strong> æ¯ä¸ªdocå†…å¯¹åº”ä¸Šé¢çš„nä¸ªtopicçš„åˆ†å¸ƒæƒ…å†µã€‚æ–‡ä»¶ä¸»é¢˜æ–‡æ¡£åˆ†å¸ƒï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªæ–‡æ¡£ï¼Œåˆ—å†…å®¹æ˜¯ä¸»é¢˜æ¦‚ç‡ã€‚<br><strong><model_name>.tassign</model_name></strong>  æ–‡ä»¶æ˜¯è®­ç»ƒé¢„æ–™ä¸­å•è¯çš„ä¸»é¢˜æŒ‡å®šï¼ˆå½’å±ï¼‰ï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªè¯­æ–™æ–‡æ¡£ã€‚<br><strong><model_name>.twords</model_name></strong>  nä¸ªtopicï¼Œä»¥åŠæ¯ä¸ªtopicä¸‹é¢åŒ…å«çš„å…·ä½“çš„å­—è¯<br><strong>wordmap.txt</strong>  è¯-idæ˜ å°„<br>å…¶ä¸­<model_name>æ ¹æ®é‡‡æ ·è¿­ä»£æ¬¡æ•°æ¥æŒ‡å®šï¼Œå¦‚model-00800ï¼Œæœ€åä¸€æ¬¡é‡‡æ ·åç§°å‘½åä¸ºmodel-finalã€‚</model_name></p>
</li>
</ol>
<blockquote>
<p>å‚è€ƒé“¾æ¥ï¼š<br><a href="http://www.ithao123.cn/content-4208214.html" target="_blank" rel="external">http://www.ithao123.cn/content-4208214.html</a><br><a href="http://jgibblda.sourceforge.net/" target="_blank" rel="external">http://jgibblda.sourceforge.net/</a></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LDA/">LDA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cluster/">cluster</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/machine-learning/">machine learning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/topic-modeling/">topic modeling</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/machine-learning/">machine learning</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Shuang
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>